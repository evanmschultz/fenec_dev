e
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor

        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-visit_Comment

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-get_node_position_data

        None, None, None
        , 

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel__*__FUNCTION-convert_comment_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:utilities:processing_context.py__*__MODULE__*__CLASS-PositionData

        None, None, 
from dataclasses import dataclass
        , 
import libcst
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst._metadata_dependent import _UNDEFINED_DEFAULT
        

Summary:

        postcode:python_parser:visitors:node_processing:gather_dependencies.py__*__MODULE__*__FUNCTION-gather_and_set_children_dependencies

        None, 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        , 
import re
        , 
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
import libcst
from libcst.metadata import MetadataWrapper
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater

        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-update_imports

        None, None, None
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel__*__FUNCTION-convert_to_metadata

        None, None, None
        , None, None
        , 
import logging
from pathlib import Path
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser

        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-open_file

        None, None, None
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-parse

        None, None, None
        , 

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-converted_path_string

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory

        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance

        None, None, None
        
Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.CLASS],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> ClassModelBuilder:
    """
        Creates a ClassModelBuilder instance for building class models.

        Args:
            block_type: Specifies that a ClassModelBuilder is to be created.
            id (str): The unique identifier for the class model.
            name (str): The name of the class.
            parent_id (str): The identifier of the parent model.

        Returns:
            ClassModelBuilder: An instance of ClassModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.FUNCTION],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> FunctionModelBuilder:
    """
        Creates a FunctionModelBuilder instance for building function models.

        Args:
            block_type: Specifies that a FunctionModelBuilder is to be created.
            id (str): The unique identifier for the function model.
            name (str): The name of the function.
            parent_id (str): The identifier of the parent model.

        Returns:
            FunctionModelBuilder: An instance of FunctionModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],
    *,
    id: str,
    parent_id: str,
) -> StandaloneBlockModelBuilder:
    """
        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.

        Args:
            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.
            id (str): The unique identifier for the standalone code block model.
            parent_id (str): The identifier of the parent model.

        Returns:
            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@logging_decorator()
@staticmethod
def create_builder_instance(
    block_type: BlockType,
    *,
    id: str,
    name: str | None = None,
    parent_id: str | None = None,
    file_path: str | None = None,
) -> (
    ModuleModelBuilder
    | ClassModelBuilder
    | FunctionModelBuilder
    | StandaloneBlockModelBuilder
):
    """
        Creates and returns an instance of a model builder based on the specified block type.

        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.

        Args:
            block_type (BlockType): The type of code block for which the builder is to be created.
            id (str): The unique identifier for the builder.
            name (str | None): The name of the code block (relevant for class or function blocks).
            parent_id (str | None): The identifier of the parent model (if applicable).
            file_path (str | None): The file path of the module (relevant for module blocks).

        Returns:
            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:
            An instance of the appropriate model builder class.

        Raises:
            ValueError: If an unknown block type is provided.

        Example:
            >>> builder = BuilderFactory.create_builder_instance(
                    block_type=BlockType.CLASS,
                    id='class1',
                    name='MyClass',
                    parent_id='module1'
                )
            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.
        """

    if block_type not in BuilderFactory._creation_strategies:
        raise ValueError(f"Unknown node type: {block_type}")
    return BuilderFactory._creation_strategies[block_type](
        id=id, name=name, parent_id=parent_id, file_path=file_path
    )

, 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor

        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Module

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Import

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_ImportFrom

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_ClassDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_ClassDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_FunctionDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Parameters

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_FunctionDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_Module

        None, None, None
        , 

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory

        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance

        None, None, None
        
Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.CLASS],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> ClassModelBuilder:
    """
        Creates a ClassModelBuilder instance for building class models.

        Args:
            block_type: Specifies that a ClassModelBuilder is to be created.
            id (str): The unique identifier for the class model.
            name (str): The name of the class.
            parent_id (str): The identifier of the parent model.

        Returns:
            ClassModelBuilder: An instance of ClassModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.FUNCTION],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> FunctionModelBuilder:
    """
        Creates a FunctionModelBuilder instance for building function models.

        Args:
            block_type: Specifies that a FunctionModelBuilder is to be created.
            id (str): The unique identifier for the function model.
            name (str): The name of the function.
            parent_id (str): The identifier of the parent model.

        Returns:
            FunctionModelBuilder: An instance of FunctionModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],
    *,
    id: str,
    parent_id: str,
) -> StandaloneBlockModelBuilder:
    """
        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.

        Args:
            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.
            id (str): The unique identifier for the standalone code block model.
            parent_id (str): The identifier of the parent model.

        Returns:
            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@logging_decorator()
@staticmethod
def create_builder_instance(
    block_type: BlockType,
    *,
    id: str,
    name: str | None = None,
    parent_id: str | None = None,
    file_path: str | None = None,
) -> (
    ModuleModelBuilder
    | ClassModelBuilder
    | FunctionModelBuilder
    | StandaloneBlockModelBuilder
):
    """
        Creates and returns an instance of a model builder based on the specified block type.

        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.

        Args:
            block_type (BlockType): The type of code block for which the builder is to be created.
            id (str): The unique identifier for the builder.
            name (str | None): The name of the code block (relevant for class or function blocks).
            parent_id (str | None): The identifier of the parent model (if applicable).
            file_path (str | None): The file path of the module (relevant for module blocks).

        Returns:
            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:
            An instance of the appropriate model builder class.

        Raises:
            ValueError: If an unknown block type is provided.

        Example:
            >>> builder = BuilderFactory.create_builder_instance(
                    block_type=BlockType.CLASS,
                    id='class1',
                    name='MyClass',
                    parent_id='module1'
                )
            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.
        """

    if block_type not in BuilderFactory._creation_strategies:
        raise ValueError(f"Unknown node type: {block_type}")
    return BuilderFactory._creation_strategies[block_type](
        id=id, name=name, parent_id=parent_id, file_path=file_path
    )

, 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor

        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-visit_Comment

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-get_node_position_data

        None, None, None
        , 

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel__*__FUNCTION-convert_comment_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:utilities:processing_context.py__*__MODULE__*__CLASS-PositionData

        None, None, 
from dataclasses import dataclass
        , 
import libcst
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst._metadata_dependent import _UNDEFINED_DEFAULT
        

Summary:

        postcode:python_parser:visitors:node_processing:gather_dependencies.py__*__MODULE__*__FUNCTION-gather_and_set_children_dependencies

        None, 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        , 
import re
        , 
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
import libcst
from libcst.metadata import MetadataWrapper
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater

        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-update_imports

        None, None, None
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel__*__FUNCTION-convert_to_metadata

        None, None, None
        , None, None
        

Summary:

        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer

        

Summary:

        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer__*__FUNCTION-summarize_code

        None, None, None
        

Summary:

        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer__*__FUNCTION-test_summarize_code

        None, None, None
        , None, 
from typing import Literal, Protocol
        , 
from dataclasses import dataclass
import logging
from pathlib import Path
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE

        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__STANDALONE_BLOCK-1

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManagerProcessFilesReturn

        None, 

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel__*__FUNCTION-convert_to_metadata

        None, None, None
        , None, None
        , 
from dataclasses import dataclass
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager

        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-process_files

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_walk_directories

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_filter_python_files

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_get_python_files

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_process_file

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_parse_file

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_build_module_model

        None, None, None
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser

        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-open_file

        None, None, None
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-parse

        None, None, None
        , 

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-converted_path_string

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory

        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance

        None, None, None
        
Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.CLASS],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> ClassModelBuilder:
    """
        Creates a ClassModelBuilder instance for building class models.

        Args:
            block_type: Specifies that a ClassModelBuilder is to be created.
            id (str): The unique identifier for the class model.
            name (str): The name of the class.
            parent_id (str): The identifier of the parent model.

        Returns:
            ClassModelBuilder: An instance of ClassModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.FUNCTION],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> FunctionModelBuilder:
    """
        Creates a FunctionModelBuilder instance for building function models.

        Args:
            block_type: Specifies that a FunctionModelBuilder is to be created.
            id (str): The unique identifier for the function model.
            name (str): The name of the function.
            parent_id (str): The identifier of the parent model.

        Returns:
            FunctionModelBuilder: An instance of FunctionModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],
    *,
    id: str,
    parent_id: str,
) -> StandaloneBlockModelBuilder:
    """
        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.

        Args:
            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.
            id (str): The unique identifier for the standalone code block model.
            parent_id (str): The identifier of the parent model.

        Returns:
            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@logging_decorator()
@staticmethod
def create_builder_instance(
    block_type: BlockType,
    *,
    id: str,
    name: str | None = None,
    parent_id: str | None = None,
    file_path: str | None = None,
) -> (
    ModuleModelBuilder
    | ClassModelBuilder
    | FunctionModelBuilder
    | StandaloneBlockModelBuilder
):
    """
        Creates and returns an instance of a model builder based on the specified block type.

        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.

        Args:
            block_type (BlockType): The type of code block for which the builder is to be created.
            id (str): The unique identifier for the builder.
            name (str | None): The name of the code block (relevant for class or function blocks).
            parent_id (str | None): The identifier of the parent model (if applicable).
            file_path (str | None): The file path of the module (relevant for module blocks).

        Returns:
            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:
            An instance of the appropriate model builder class.

        Raises:
            ValueError: If an unknown block type is provided.

        Example:
            >>> builder = BuilderFactory.create_builder_instance(
                    block_type=BlockType.CLASS,
                    id='class1',
                    name='MyClass',
                    parent_id='module1'
                )
            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.
        """

    if block_type not in BuilderFactory._creation_strategies:
        raise ValueError(f"Unknown node type: {block_type}")
    return BuilderFactory._creation_strategies[block_type](
        id=id, name=name, parent_id=parent_id, file_path=file_path
    )

, 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor

        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Module

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Import

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_ImportFrom

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_ClassDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_ClassDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_FunctionDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Parameters

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_FunctionDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_Module

        None, None, None
        , 

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory

        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance

        None, None, None
        
Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.CLASS],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> ClassModelBuilder:
    """
        Creates a ClassModelBuilder instance for building class models.

        Args:
            block_type: Specifies that a ClassModelBuilder is to be created.
            id (str): The unique identifier for the class model.
            name (str): The name of the class.
            parent_id (str): The identifier of the parent model.

        Returns:
            ClassModelBuilder: An instance of ClassModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.FUNCTION],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> FunctionModelBuilder:
    """
        Creates a FunctionModelBuilder instance for building function models.

        Args:
            block_type: Specifies that a FunctionModelBuilder is to be created.
            id (str): The unique identifier for the function model.
            name (str): The name of the function.
            parent_id (str): The identifier of the parent model.

        Returns:
            FunctionModelBuilder: An instance of FunctionModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],
    *,
    id: str,
    parent_id: str,
) -> StandaloneBlockModelBuilder:
    """
        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.

        Args:
            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.
            id (str): The unique identifier for the standalone code block model.
            parent_id (str): The identifier of the parent model.

        Returns:
            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@logging_decorator()
@staticmethod
def create_builder_instance(
    block_type: BlockType,
    *,
    id: str,
    name: str | None = None,
    parent_id: str | None = None,
    file_path: str | None = None,
) -> (
    ModuleModelBuilder
    | ClassModelBuilder
    | FunctionModelBuilder
    | StandaloneBlockModelBuilder
):
    """
        Creates and returns an instance of a model builder based on the specified block type.

        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.

        Args:
            block_type (BlockType): The type of code block for which the builder is to be created.
            id (str): The unique identifier for the builder.
            name (str | None): The name of the code block (relevant for class or function blocks).
            parent_id (str | None): The identifier of the parent model (if applicable).
            file_path (str | None): The file path of the module (relevant for module blocks).

        Returns:
            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:
            An instance of the appropriate model builder class.

        Raises:
            ValueError: If an unknown block type is provided.

        Example:
            >>> builder = BuilderFactory.create_builder_instance(
                    block_type=BlockType.CLASS,
                    id='class1',
                    name='MyClass',
                    parent_id='module1'
                )
            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.
        """

    if block_type not in BuilderFactory._creation_strategies:
        raise ValueError(f"Unknown node type: {block_type}")
    return BuilderFactory._creation_strategies[block_type](
        id=id, name=name, parent_id=parent_id, file_path=file_path
    )

, 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor

        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-visit_Comment

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-get_node_position_data

        None, None, None
        , 

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel__*__FUNCTION-convert_comment_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:utilities:processing_context.py__*__MODULE__*__CLASS-PositionData

        None, None, 
from dataclasses import dataclass
        , 
import libcst
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst._metadata_dependent import _UNDEFINED_DEFAULT
        

Summary:

        postcode:python_parser:visitors:node_processing:gather_dependencies.py__*__MODULE__*__FUNCTION-gather_and_set_children_dependencies

        None, 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        , 
import re
        , 
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
import libcst
from libcst.metadata import MetadataWrapper
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater

        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-update_imports

        None, None, None
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel__*__FUNCTION-convert_to_metadata

        None, None, None
        , None, None
        , 
import logging
from pathlib import Path
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser

        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-open_file

        None, None, None
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-parse

        None, None, None
        , 

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-converted_path_string

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory

        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance

        None, None, None
        
Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.CLASS],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> ClassModelBuilder:
    """
        Creates a ClassModelBuilder instance for building class models.

        Args:
            block_type: Specifies that a ClassModelBuilder is to be created.
            id (str): The unique identifier for the class model.
            name (str): The name of the class.
            parent_id (str): The identifier of the parent model.

        Returns:
            ClassModelBuilder: An instance of ClassModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.FUNCTION],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> FunctionModelBuilder:
    """
        Creates a FunctionModelBuilder instance for building function models.

        Args:
            block_type: Specifies that a FunctionModelBuilder is to be created.
            id (str): The unique identifier for the function model.
            name (str): The name of the function.
            parent_id (str): The identifier of the parent model.

        Returns:
            FunctionModelBuilder: An instance of FunctionModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],
    *,
    id: str,
    parent_id: str,
) -> StandaloneBlockModelBuilder:
    """
        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.

        Args:
            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.
            id (str): The unique identifier for the standalone code block model.
            parent_id (str): The identifier of the parent model.

        Returns:
            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@logging_decorator()
@staticmethod
def create_builder_instance(
    block_type: BlockType,
    *,
    id: str,
    name: str | None = None,
    parent_id: str | None = None,
    file_path: str | None = None,
) -> (
    ModuleModelBuilder
    | ClassModelBuilder
    | FunctionModelBuilder
    | StandaloneBlockModelBuilder
):
    """
        Creates and returns an instance of a model builder based on the specified block type.

        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.

        Args:
            block_type (BlockType): The type of code block for which the builder is to be created.
            id (str): The unique identifier for the builder.
            name (str | None): The name of the code block (relevant for class or function blocks).
            parent_id (str | None): The identifier of the parent model (if applicable).
            file_path (str | None): The file path of the module (relevant for module blocks).

        Returns:
            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:
            An instance of the appropriate model builder class.

        Raises:
            ValueError: If an unknown block type is provided.

        Example:
            >>> builder = BuilderFactory.create_builder_instance(
                    block_type=BlockType.CLASS,
                    id='class1',
                    name='MyClass',
                    parent_id='module1'
                )
            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.
        """

    if block_type not in BuilderFactory._creation_strategies:
        raise ValueError(f"Unknown node type: {block_type}")
    return BuilderFactory._creation_strategies[block_type](
        id=id, name=name, parent_id=parent_id, file_path=file_path
    )

, 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor

        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Module

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Import

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_ImportFrom

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_ClassDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_ClassDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_FunctionDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Parameters

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_FunctionDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_Module

        None, None, None
        , 

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory

        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance

        None, None, None
        
Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.CLASS],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> ClassModelBuilder:
    """
        Creates a ClassModelBuilder instance for building class models.

        Args:
            block_type: Specifies that a ClassModelBuilder is to be created.
            id (str): The unique identifier for the class model.
            name (str): The name of the class.
            parent_id (str): The identifier of the parent model.

        Returns:
            ClassModelBuilder: An instance of ClassModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.FUNCTION],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> FunctionModelBuilder:
    """
        Creates a FunctionModelBuilder instance for building function models.

        Args:
            block_type: Specifies that a FunctionModelBuilder is to be created.
            id (str): The unique identifier for the function model.
            name (str): The name of the function.
            parent_id (str): The identifier of the parent model.

        Returns:
            FunctionModelBuilder: An instance of FunctionModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],
    *,
    id: str,
    parent_id: str,
) -> StandaloneBlockModelBuilder:
    """
        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.

        Args:
            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.
            id (str): The unique identifier for the standalone code block model.
            parent_id (str): The identifier of the parent model.

        Returns:
            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@logging_decorator()
@staticmethod
def create_builder_instance(
    block_type: BlockType,
    *,
    id: str,
    name: str | None = None,
    parent_id: str | None = None,
    file_path: str | None = None,
) -> (
    ModuleModelBuilder
    | ClassModelBuilder
    | FunctionModelBuilder
    | StandaloneBlockModelBuilder
):
    """
        Creates and returns an instance of a model builder based on the specified block type.

        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.

        Args:
            block_type (BlockType): The type of code block for which the builder is to be created.
            id (str): The unique identifier for the builder.
            name (str | None): The name of the code block (relevant for class or function blocks).
            parent_id (str | None): The identifier of the parent model (if applicable).
            file_path (str | None): The file path of the module (relevant for module blocks).

        Returns:
            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:
            An instance of the appropriate model builder class.

        Raises:
            ValueError: If an unknown block type is provided.

        Example:
            >>> builder = BuilderFactory.create_builder_instance(
                    block_type=BlockType.CLASS,
                    id='class1',
                    name='MyClass',
                    parent_id='module1'
                )
            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.
        """

    if block_type not in BuilderFactory._creation_strategies:
        raise ValueError(f"Unknown node type: {block_type}")
    return BuilderFactory._creation_strategies[block_type](
        id=id, name=name, parent_id=parent_id, file_path=file_path
    )

, 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor

        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-visit_Comment

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-get_node_position_data

        None, None, None
        , 

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel__*__FUNCTION-convert_comment_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:utilities:processing_context.py__*__MODULE__*__CLASS-PositionData

        None, None, 
from dataclasses import dataclass
        , 
import libcst
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst._metadata_dependent import _UNDEFINED_DEFAULT
        

Summary:

        postcode:python_parser:visitors:node_processing:gather_dependencies.py__*__MODULE__*__FUNCTION-gather_and_set_children_dependencies

        None, 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        , 
import re
        , 
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
import libcst
from libcst.metadata import MetadataWrapper
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater

        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-update_imports

        None, None, None
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel__*__FUNCTION-convert_to_metadata

        None, None, None
        , None, None
        

Summary:

        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer

        

Summary:

        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer__*__FUNCTION-summarize_code

        None, None, None
        

Summary:

        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer__*__FUNCTION-test_summarize_code

        None, None, None
        , None, 
from typing import Literal, Protocol
        , 
from dataclasses import dataclass
import logging
from pathlib import Path
        port Path
        D      D      \W      \W                  t      t      =!     =!     *&      *&                              4      4                                                      z      z      t      t                              I{      I{      l      l      h      h      VC      VC      V      V      D      D      ay      ay      0      0                  "      "      $      $      |      |                              <      <      I      I      w      w                              [      [      Z      Z                              [      [      N>      N>                  @      @      2      2      .      .      @0      @0      6      6      [      [      R      R                  u      u      S      S      p.      p.      2      2      9      9                  m      m      U      U      K      K      >      >                              d      d                                          @      @      3      3                  7      7                  &      &                              ~      ~      Iu      Iu      Ba      Ba      FW      FW      QC      QC      !&      !&      ,      ,      g<      g<      x@      x@                              =      =      T[      T[      T      T      D      D      C      C      ^(      ^(      6      6      "      "      J     J                 8{      8{      *      *                  V      V                              I4     I4     .(      .(      	      	      pq      pq                    S      S      4      4      ,      ,      a      a                                                      :      :                  w      w      C      C                  3      3      &3      &3                                J      J      p>      p>                  ]}      ]}      '      '      :      :                              5      5      2      2      -      -      ag      ag      .      .                              R      R                   c       c      g      g      S      S      2\      2\      ^      ^      S      S      I      I      o+      o+      X      X      	      	      0+      0+      *      *      d      d       %       %      ~	      ~	      	      	      B      B      5      5      7      7      B"      B"      ZL      ZL                              [      [      '      '      c      c                  h      h                  #      #      P      P      
      
                              b      b      
[      
[      tS      tS                  |C      |C      9      9      n#      n#      eE      eE                  8      8      O      O      ]-      ]-      [      [      '       '       O}      O}                   C       C      >      >      y"      y"                  Cu      Cu                    ^      ^      k      k      JO      JO                  0      0      {      {      J     K     t      t      )      )      %      %      I      I                                          V
      V
                  U      U      z      z      16      16      p      p                              -      -      4      4      I      I                                                                                            w      w      m      m      -      -      
      
                  h      h                  >      >      N      N      EP      EP                  2      2                  #e      #e                  3F      3F      wa      wa                  l8      l8      SV     SV                             u"      u"      z      z      -J      -J                  u      u                  "Y      "Y                                                                7      7      o      o      a      a      A      A                  jJ      jJ                  L      L                              G      G      P      P      k      k      a      a      {      {                    M      M      4      4      9      9                  #      #      Y-      Y-      m      m                  6      6                              {      {                  FC      FC                  &      &                                          
      
      "L      "L      dl      dl                                                                  
      
                  y      y      ]      ]                              s      s                              Q7      Q7      z      z      rg      rg      '-      '-      N9      N9      f      f      $      $                                          A      A                  )      )      SC     SC     %l      %l                  S      S      a      a                                            V)      V)                    5      5      ]      ]      Pv      Pv      OI      OI                              u      u      +      +      R      R      h     h     {      {                              u      u      G      G      3     3     K      K                  K      K                  3     3     <      <      o      o      H      H      q      q                  +      +      ?(      ?(                  M      M      [      [      B$      B$      #     #                                       -      -      t      t      P      P                                          	J      	J                                          ~      ~      fV      fV      A      A      !M      !M      k      k                  O      O      :      :                  	      	      C     C     *     *     e      e                              Wi      Wi      c      c      d      d      po      po      v8      v8      F      F      H     H                             ~X      ~X      J      J                  L      L                              w"      w"                              :      :      x      x      RM      RM      K      K                  n      n      V]      V]      /      /                  [      [      r"      r"                                          '      '      I      I      oq      oq      f#      f#      Q      Q      $      $      D      D      C      C      o      o                                          b      b      2      2                  #      #      +      +                              m      m                  ,      ,      [      [      "      "                  @      @                              Zi      Zi      h      h       n       n                                bb      bb      u      u      Q      Q      j      j                  k      k      E      E                  Z      Z      7      7      y      y      F      F                                        "m      "m      n      n      w      w                  Q      Q                  \"      \"      _      _      0      0      c>      c>      1      1                                                        Q      Q      x      x                  H      H      z      z                              u      u      y1      y1      V      V      |      |      q      q      0e      0e                              o      o      {      {      K2      K2      ,      ,                                                                                                    I      I      I      I      '      '      z      z      1'      1'      u      u      B      B      /      /      7      7      >      >      3      3      V      V                  )      )                ZE      ZE      i      i      -a      -a      19      19      '     '     Q     Q     &L     &L     1      1                O&     O&     K      K      4.      4.      p     p     C      C      "      "      l      l      $      $                              <Y      <Y                  _      _      _2      _2                                        4      4      	      	      [      [                    p      p      2      2                  u      u      ?      ?      |      |                  o      o      f      f      P      P                  y`      y`      c      c                  k      k      }      }      \      \                              88      88      c      c      ~l      ~l      W      W      
      
                                                      a      a      q      q      s      s                              %      %      <      <                  #      #      k      k      c      c                  ;      ;                  L      L                  +      +                  h      h                    [      [                  k_      k_      ~      ~      ~      ~      
@      
@      F;      F;      s      s      n      n      6      6                  Jk      Jk      7      7                  S      S      rD      rD                                          F      F      v      v                  E      E      3K      3K      Y      Y      I       I                                           [      [      B      B      `_      `_      Y      Y      N      N      	      	      p      p      p      p      ]      ]      @      @                                          
      
      C     C     D~      D~                  {r      {r      j      j      9U      9U      F      F      /      /      #=      #=      w~      w~                  -Z     -Z     O      O      )      )                  [      [      G      G      !     "     0,      0,                  X      X      1      1      c      c                  )       )                   S      S      N      N      Y      Y      ?      ?      }      }      -      -      ^      ^      '     '               z      z      ,      ,                          \      \      %      %      qt      qt      s      s                  )      )      o       o                               }      }      d:      d:      q      q      y      y      e      e      A      A                  8      8      7{      7{      I      I                                          p      p      B      B      |      |      .      .      O     O     B     B                             
      
      Nj      Nj      
     
                 )      )      /      /                  s      s                              *      *      `     a                 b     c                 #      #                  1      1                  e+      e+                  x      x      =}      =}      Ho      Ho      #n      #n      i      i      2      2                                mh      mh      /Y      /Y      U      U      "      "      3      3      @*      @*                  9S      9S      c      c      v      v      j      j      <     <     J+     J+                 1      1                  6B      6B      9      9      ?      ?      }g      }g      \      \      5;      5;      )      )      ?      ?      $l      $l                  _      _                              (      (      _]      _]                  I      I      ;C      ;C      ?      ?                  m;      m;      N      N                  ,      ,      e      e                  s;      s;      J      J      -       -                   \      \      O      O                                          H      H      O      O      v      v      @R      @R      4      4      |      |                  #      #                            N      N      n      n      O      O                  P      P      J      J                              B      B      Q      Q                              o      o      l      l      :      :      ~R      ~R      _      _      C;      C;                  Le      Le      -      -                  Z      Z                  k      k      1      1                  S      S      1      1                  M      M                  4      4      L      L      /      /                  !      !                              TL      TL      l      l      P      P      oO      oO      P      P      m      m      z      z      A      A      u      u      L      L      g      g      _      _      X,      X,      W      W      c      c      N      N      J      J                  G      G                  H      H                  s      s      Y      Y      uk      uk      ;      ;      oa      oa      w      w      E      E      q      q      e      e      ;      ;                                          v]      v]                  Hp      Hp      Yn      Yn      1;      1;      a      a      /<      /<      /      /                  D      D      \      \      ]      ]      *      *      1      1                              ~      ~      ^      ^      D      D      	      	      f      f      #      #                  a      a      w      w      t      t                                                                              ^u      ^u      O1      O1                  q      q      2      2      I      I      a      a                              G9      G9      1      1      &      &                              {      {      e      e      |
      |
                  W      W      4      4                  8     8     /     0     6      6      1     2     W      W      IE      IE                                          %      %      Fd      Fd                                          '      '                                          O      O      ^      ^                  >      >      0      0                  f      f                              c      c                                          A      A      T      T      s      s                              _;      _;      A/      A/      .      .                                          d      d                  :      :                  M*      M*                    z      z                  \l      \l      D      D      "      "      bV      bV      )      )      )      )                  b      b                  i      i      E      E                                          K      K                  1      1                  p      p                              !      !                  P<      P<      uH      uH                  -(     -(                 Z      Z      Eg      Eg                  9      9      '      '                              R      R                  ub      ub      /6      /6      s      s                  e      e                  {      {      Y     Y     u      u      ,I      ,I      m      m      '      '      S      S                  @      @                              t      t      X@      X@      ,f      ,f                          9      9      I      I      N      N      IA     IA     O      O                  q      q      p      p      ]      ]      }      }      3W      3W      <      <                  #      #      |      |      :      :      Sk      Sk      D      D                  E      E                  r      r                              n      n      i     i                                                                                                   e      e                                          ;      ;      B      B                  O      O      Z      Z                  1      1                  r      r      Y      Y                              o      o      ~      ~      f      f      D      D      |;      |;      7      7                              2      2      `      `                  V      V                              )?      )?      Q      Q                              a      a      U      U                                                      6      6                  f.      f.      nl      nl      K      K      D      D                              A     A     0      0                              *      *                                          el      el                              ]      ]                  9      9      C      C                                          O|      O|      E      E      M"      M"      o      o      tW      tW                  aF      aF      8      8      .      .                              F      F      b      b      V      V      nP      nP      `      `                  h      h      s[      s[      Z      Z                  t      t      m      m      aQ      aQ      (      (      8      8                  B      B                  bi      bi      Y      Y      n      n                              (      (      z      z                  m      m                  x2      x2      r      r      ju      ju                  `      `      \      \      $      $      i      i      e      e                    O      O      2      2      E      E                  :      :      q      q      O`      O`      J      J                  g      g      p      p      s      s      ^9      ^9                  ;      ;                  	O      	O      C      C      l      l      BT      BT      Q%      Q%      
      
                              M      M                  ?      ?                              .}      .}      r      r                                          jF      jF                  -     -                 L      L      8      8                              O      O      w      w                              -      -                  S      S      #>      #>      ^      ^                  e      e      ^      ^                  ?|      ?|                  5      5      '      '      B      B      V*      V*      =0      =0      n     o                                         h      h                  W      W      c      c      3      3                  H      H      &      &      x      x                  kC      kC                              s      s                  g      g      M+      M+      .      .                                          1K      1K      <      <                              [      [                              M      M                  m      m      s      s      b      b                  bR      bR      <      <                              :H      :H      9      9                  ;      ;      B      B                  a      a                  5      5                              ~      ~                              '      '      +|      +|      0      0      t      t      @S      @S      s      s      3      3      S      S      xb      xb      0      0                                          #      #                  M      M      !\      !\      1      1      `      `                                          /      /      8      8                              +      +      A      A      d      d                              
      
      A(      A(      A      A                  x      x      ~      ~      h      h      
      
      A      A      W$      W$                                                        |      |      Uj      Uj                              y      y      t      t      s      s      &s      &s      b      b      $n      $n      F      F      O      O      $      $      W      W      B      B      F)      F)      (      (      R      R      >5      >5      2      2      1      1      =+      =+                              i      i                  eu      eu      o      o                  ]      ]      	P      	P      @4      @4      >d      >d      1B      1B      L      L      ]      ]      )%      )%      1      1      #      #                                          7      7      L+      L+                                          K      K      Q      Q                  n      n                              gx      gx      C      C                                            :D      :D                  )      )                              B      B      Tb      Tb                              4      4      y      y      c      c                  ^=      ^=                  <      <      N      N                                                                                                      -      -      .      .      7)      7)                              `      `      A      A                              5u      5u      ?      ?      As      As      {p      {p      }      }      ]{      ]{      4b      4b                  X      X      F3      F3      G      G      (      (      LB      LB                  a      a                  [      [                              U      U                  s      s                              ZV      ZV      +      +      '      '      ^      ^      n      n                  ]@      ]@      %      %      z      z                  2      2                    ~&      ~&      <]      <]      	      	      b      b                  U      U      @      @      %      %      N      N                  Bp      Bp                  {      {      8\      8\      }      }      F      F      Ci      Ci      X      X      z      z                  f      f      o3      o3      a      a                  *      *                                          .      .      s      s      -     -     q      q      %     %                 e      e                  2@      2@      d      d                  >      >      )]      )]      [      [                              u      u      \      \      O      O      ?      ?      8      8                  R;      R;      F      F                  .      .      E     E                                       "      "      ,n      ,n      +\      +\                              ~      ~      4m      4m      
      
                  "      "      V      V      r      r      G      G      ;      ;      L     L     +=      +=                /
      /
                t     t     !!      !!                  V      V      =U      =U                            1%      1%      +      +      b      b      :     :     s     s     E      E                  i(      i(      WI     WI     E;     E;                 E      E      Oo      Oo      h`      h`                3      3                              DX      DX      /      /                              P       P       bZ      bZ                  }      }                              }      }      ;@      ;@      a      a                  2      2      %      %      {      {      g      g                  J      J      l      l      G      G      PZ      PZ                    vH     vH                                           [      [      i      i      &      &      V      V      x      x      3      3      1      1                  3       3       0       0       k$      k$                  %~      %~      v~      v~      [;      [;      ^      ^      I|      I|                                                      S      S      f      f      h=      h=                                                      J*      J*                  j^      j^      G      G      Y      Y                  w      w      c      c                  z      z      h      h      K      K                              -      -      pt      pt      q      q      _U      _U                  ~      ~                                          !      !      ?      ?      v      v                    H      H      l      l      *      *                  Y5      Y5                  ?      ?      u      u                              E      E                  a      a      	      	      J      J      6      6      U      U                  G      G      s      s      9/      9/      o      o      >      >      g      g      &      &      9      9      <      <      -~      -~      
     
                             H      H                  ^      ^      'J      'J      X      X      	      	      V      V      X      X      ^h      ^h      U      U      0:      0:                  w      w                            K      K      ;     <                 Z      Z      +      +                  za      za      Q      Q      +      +                                                      e      e                                                                  l      l                  2	      2	      !      !      W      W      MT      MT      D      D      4@      4@      =      =      Z      Z      zV      zV      J      J      "      "                              M      M      O      O      <      <      y      y      q      q      3$      3$      HO      HO                                        u      u      j,      j,      l      l      !O      !O      J      J                                          L9      L9      $      $                              Sd      Sd      y      y      -      -                  R      R                  U      U                  "      "      8      8      vV     vV     "      "      0      0      TO      TO      M(      M(      ?      ?      RM      RM                              D      D      *r      *r      Xo      Xo      p      p                  0     0                                           
     
     9     9               6!     6!     0N     0N     %     %                 6      6      Q.      Q.      La      La      P     P     [1      [1      C      C      FB      FB                              !      !                  )      )      w1     w1     y      y                  ke      ke                  V      V                              j      j      s'      s'      /$      /$      I      I                  m      m      <     <     {6     {6     H      H                                          u      u      :      :                                          U      U      v      v                  4      4                              3      3                                                      }      }      8      8                  a      a                  y      y      [      [      d      d                              7      7      \      \                                                      j~      j~      8d      8d      j      j      -r      -r      <      <                              ?k      ?k                  b      b      	T      	T      #      #                  oZ      oZ      mC      mC                  1      1      e      e                              S      S      (      (                              	      	      }      }      j$      j$      t      t      Y      Y      6      6      b      b      Uu      Uu      ;      ;      '      '                                                      L^      L^      3C      3C      CX     CX     8     8     }a      }a      	+I   chroma:document
Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE

        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__STANDALONE_BLOCK-1

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManagerProcessFilesReturn

        None, 

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel__*__FUNCTION-convert_to_metadata

        None, None, None
        , None, None
        , 
from dataclasses import dataclass
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager

        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-process_files

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_walk_directories

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_filter_python_files

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_get_python_files

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_process_file

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_parse_file

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_build_module_model

        None, None, None
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser

        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-open_file

        None, None, None
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-parse

        None, None, None
        , 

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-converted_path_string

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory

        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance

        None, None, None
        
Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.CLASS],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> ClassModelBuilder:
    """
        Creates a ClassModelBuilder instance for building class models.

        Args:
            block_type: Specifies that a ClassModelBuilder is to be created.
            id (str): The unique identifier for the class model.
            name (str): The name of the class.
            parent_id (str): The identifier of the parent model.

        Returns:
            ClassModelBuilder: An instance of ClassModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.FUNCTION],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> FunctionModelBuilder:
    """
        Creates a FunctionModelBuilder instance for building function models.

        Args:
            block_type: Specifies that a FunctionModelBuilder is to be created.
            id (str): The unique identifier for the function model.
            name (str): The name of the function.
            parent_id (str): The identifier of the parent model.

        Returns:
            FunctionModelBuilder: An instance of FunctionModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],
    *,
    id: str,
    parent_id: str,
) -> StandaloneBlockModelBuilder:
    """
        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.

        Args:
            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.
            id (str): The unique identifier for the standalone code block model.
            parent_id (str): The identifier of the parent model.

        Returns:
            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@logging_decorator()
@staticmethod
def create_builder_instance(
    block_type: BlockType,
    *,
    id: str,
    name: str | None = None,
    parent_id: str | None = None,
    file_path: str | None = None,
) -> (
    ModuleModelBuilder
    | ClassModelBuilder
    | FunctionModelBuilder
    | StandaloneBlockModelBuilder
):
    """
        Creates and returns an instance of a model builder based on the specified block type.

        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.

        Args:
            block_type (BlockType): The type of code block for which the builder is to be created.
            id (str): The unique identifier for the builder.
            name (str | None): The name of the code block (relevant for class or function blocks).
            parent_id (str | None): The identifier of the parent model (if applicable).
            file_path (str | None): The file path of the module (relevant for module blocks).

        Returns:
            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:
            An instance of the appropriate model builder class.

        Raises:
            ValueError: If an unknown block type is provided.

        Example:
            >>> builder = BuilderFactory.create_builder_instance(
                    block_type=BlockType.CLASS,
                    id='class1',
                    name='MyClass',
                    parent_id='module1'
                )
            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.
        """

    if block_type not in BuilderFactory._creation_strategies:
        raise ValueError(f"Unknown node type: {block_type}")
    return BuilderFactory._creation_strategies[block_type](
        id=id, name=name, parent_id=parent_id, file_path=file_path
    )

, 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor

        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Module

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Import

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_ImportFrom

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_ClassDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_ClassDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_FunctionDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Parameters

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_FunctionDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_Module

        None, None, None
        , 

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory

        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance

        None, None, None
        
Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.CLASS],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> ClassModelBuilder:
    """
        Creates a ClassModelBuilder instance for building class models.

        Args:
            block_type: Specifies that a ClassModelBuilder is to be created.
            id (str): The unique identifier for the class model.
            name (str): The name of the class.
            parent_id (str): The identifier of the parent model.

        Returns:
            ClassModelBuilder: An instance of ClassModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.FUNCTION],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> FunctionModelBuilder:
    """
        Creates a FunctionModelBuilder instance for building function models.

        Args:
            block_type: Specifies that a FunctionModelBuilder is to be created.
            id (str): The unique identifier for the function model.
            name (str): The name of the function.
            parent_id (str): The identifier of the parent model.

        Returns:
            FunctionModelBuilder: An instance of FunctionModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],
    *,
    id: str,
    parent_id: str,
) -> StandaloneBlockModelBuilder:
    """
        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.

        Args:
            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.
            id (str): The unique identifier for the standalone code block model.
            parent_id (str): The identifier of the parent model.

        Returns:
            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@logging_decorator()
@staticmethod
def create_builder_instance(
    block_type: BlockType,
    *,
    id: str,
    name: str | None = None,
    parent_id: str | None = None,
    file_path: str | None = None,
) -> (
    ModuleModelBuilder
    | ClassModelBuilder
    | FunctionModelBuilder
    | StandaloneBlockModelBuilder
):
    """
        Creates and returns an instance of a model builder based on the specified block type.

        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.

        Args:
            block_type (BlockType): The type of code block for which the builder is to be created.
            id (str): The unique identifier for the builder.
            name (str | None): The name of the code block (relevant for class or function blocks).
            parent_id (str | None): The identifier of the parent model (if applicable).
            file_path (str | None): The file path of the module (relevant for module blocks).

        Returns:
            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:
            An instance of the appropriate model builder class.

        Raises:
            ValueError: If an unknown block type is provided.

        Example:
            >>> builder = BuilderFactory.create_builder_instance(
                    block_type=BlockType.CLASS,
                    id='class1',
                    name='MyClass',
                    parent_id='module1'
                )
            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.
        """

    if block_type not in BuilderFactory._creation_strategies:
        raise ValueError(f"Unknown node type: {block_type}")
    return BuilderFactory._creation_strategies[block_type](
        id=id, name=name, parent_id=parent_id, file_path=file_path
    )

, 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor

        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-visit_Comment

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-get_node_position_data

        None, None, None
        , 

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel__*__FUNCTION-convert_comment_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:utilities:processing_context.py__*__MODULE__*__CLASS-PositionData

        None, None, 
from dataclasses import dataclass
        , 
import libcst
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst._metadata_dependent import _UNDEFINED_DEFAULT
        

Summary:

        postcode:python_parser:visitors:node_processing:gather_dependencies.py__*__MODULE__*__FUNCTION-gather_and_set_children_dependencies

        None, 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        , 
import re
        , 
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
import libcst
from libcst.metadata import MetadataWrapper
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater

        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-update_imports

        None, None, None
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel__*__FUNCTION-convert_to_metadata

        None, None, None
        , None, None
        , 
import logging
from pathlib import Path
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser

        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-open_file

        None, None, None
        

Summary:

        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-parse

        None, None, None
        , 

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-converted_path_string

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory

        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance

        None, None, None
        
Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.CLASS],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> ClassModelBuilder:
    """
        Creates a ClassModelBuilder instance for building class models.

        Args:
            block_type: Specifies that a ClassModelBuilder is to be created.
            id (str): The unique identifier for the class model.
            name (str): The name of the class.
            parent_id (str): The identifier of the parent model.

        Returns:
            ClassModelBuilder: An instance of ClassModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.FUNCTION],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> FunctionModelBuilder:
    """
        Creates a FunctionModelBuilder instance for building function models.

        Args:
            block_type: Specifies that a FunctionModelBuilder is to be created.
            id (str): The unique identifier for the function model.
            name (str): The name of the function.
            parent_id (str): The identifier of the parent model.

        Returns:
            FunctionModelBuilder: An instance of FunctionModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],
    *,
    id: str,
    parent_id: str,
) -> StandaloneBlockModelBuilder:
    """
        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.

        Args:
            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.
            id (str): The unique identifier for the standalone code block model.
            parent_id (str): The identifier of the parent model.

        Returns:
            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@logging_decorator()
@staticmethod
def create_builder_instance(
    block_type: BlockType,
    *,
    id: str,
    name: str | None = None,
    parent_id: str | None = None,
    file_path: str | None = None,
) -> (
    ModuleModelBuilder
    | ClassModelBuilder
    | FunctionModelBuilder
    | StandaloneBlockModelBuilder
):
    """
        Creates and returns an instance of a model builder based on the specified block type.

        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.

        Args:
            block_type (BlockType): The type of code block for which the builder is to be created.
            id (str): The unique identifier for the builder.
            name (str | None): The name of the code block (relevant for class or function blocks).
            parent_id (str | None): The identifier of the parent model (if applicable).
            file_path (str | None): The file path of the module (relevant for module blocks).

        Returns:
            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:
            An instance of the appropriate model builder class.

        Raises:
            ValueError: If an unknown block type is provided.

        Example:
            >>> builder = BuilderFactory.create_builder_instance(
                    block_type=BlockType.CLASS,
                    id='class1',
                    name='MyClass',
                    parent_id='module1'
                )
            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.
        """

    if block_type not in BuilderFactory._creation_strategies:
        raise ValueError(f"Unknown node type: {block_type}")
    return BuilderFactory._creation_strategies[block_type](
        id=id, name=name, parent_id=parent_id, file_path=file_path
    )

, 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor

        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Module

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Import

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_ImportFrom

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_ClassDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_ClassDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_FunctionDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-visit_Parameters

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_FunctionDef

        None, None, None
        

Summary:

        postcode:python_parser:visitors:module_visitor.py__*__MODULE__*__CLASS-ModuleVisitor__*__FUNCTION-leave_Module

        None, None, None
        , 

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy

        

Summary:

        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ClassIDGenerationStrategy__*__FUNCTION-generate_id

        None, None, None
        , None, None
        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory

        

Summary:

        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance

        None, None, None
        
Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.CLASS],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> ClassModelBuilder:
    """
        Creates a ClassModelBuilder instance for building class models.

        Args:
            block_type: Specifies that a ClassModelBuilder is to be created.
            id (str): The unique identifier for the class model.
            name (str): The name of the class.
            parent_id (str): The identifier of the parent model.

        Returns:
            ClassModelBuilder: An instance of ClassModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.FUNCTION],
    *,
    id: str,
    name: str,
    parent_id: str,
) -> FunctionModelBuilder:
    """
        Creates a FunctionModelBuilder instance for building function models.

        Args:
            block_type: Specifies that a FunctionModelBuilder is to be created.
            id (str): The unique identifier for the function model.
            name (str): The name of the function.
            parent_id (str): The identifier of the parent model.

        Returns:
            FunctionModelBuilder: An instance of FunctionModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@staticmethod
@overload
def create_builder_instance(
    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],
    *,
    id: str,
    parent_id: str,
) -> StandaloneBlockModelBuilder:
    """
        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.

        Args:
            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.
            id (str): The unique identifier for the standalone code block model.
            parent_id (str): The identifier of the parent model.

        Returns:
            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.
        """
    ...


Child (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:

@logging_decorator()
@staticmethod
def create_builder_instance(
    block_type: BlockType,
    *,
    id: str,
    name: str | None = None,
    parent_id: str | None = None,
    file_path: str | None = None,
) -> (
    ModuleModelBuilder
    | ClassModelBuilder
    | FunctionModelBuilder
    | StandaloneBlockModelBuilder
):
    """
        Creates and returns an instance of a model builder based on the specified block type.

        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.

        Args:
            block_type (BlockType): The type of code block for which the builder is to be created.
            id (str): The unique identifier for the builder.
            name (str | None): The name of the code block (relevant for class or function blocks).
            parent_id (str | None): The identifier of the parent model (if applicable).
            file_path (str | None): The file path of the module (relevant for module blocks).

        Returns:
            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:
            An instance of the appropriate model builder class.

        Raises:
            ValueError: If an unknown block type is provided.

        Example:
            >>> builder = BuilderFactory.create_builder_instance(
                    block_type=BlockType.CLASS,
                    id='class1',
                    name='MyClass',
                    parent_id='module1'
                )
            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.
        """

    if block_type not in BuilderFactory._creation_strategies:
        raise ValueError(f"Unknown node type: {block_type}")
    return BuilderFactory._creation_strategies[block_type](
        id=id, name=name, parent_id=parent_id, file_path=file_path
    )

, 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
from typing import Any, Callable, Literal, overload
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder

        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder

        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:
from __future__ import annotations
from typing import TYPE_CHECKING, Any

from postcode.utilities.logger.decorators import logging_decorator

from postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder
from postcode.models.models import ClassSpecificAttributes, ClassModel
from postcode.models.enums import BlockType


if TYPE_CHECKING:
    from postcode.models.models import (
        ClassKeywordModel,
        DecoratorModel,
    )


class ClassModelBuilder(BaseModelBuilder):
    """
    A builder class for constructing a model of a Python class.

    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.

    Attributes:
        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.

    Args:
        id (str): The unique identifier for the class model.
        class_name (str): The name of the class.
        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).
    """

    def __init__(self, id: str, class_name: str, parent_id: str) -> None:
        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)

        self.class_attributes = ClassSpecificAttributes(
            class_name=class_name,
            decorators=None,
            bases=None,
            docstring=None,
            keywords=None,
        )

    def set_decorators(
        self, decorators: list[DecoratorModel] | None
    ) -> "ClassModelBuilder":
        """Adds decorator to the decorators list in the class model."""
        if decorators:
            self.class_attributes.decorators = decorators
        else:
            self.class_attributes.decorators = None
        return self

    def set_bases(self, base_classes: list[str] | None) -> "ClassModelBuilder":
        """Sets the list of base classes to the class model."""
        self.class_attributes.bases = base_classes
        return self

    def set_docstring(self, docstring: str | None) -> "ClassModelBuilder":
        """Sets the docstring of the class in the model."""
        self.class_attributes.docstring = docstring
        return self

    # # TODO: Add attribute model
    # def add_attribute(self, attribute) -> "ClassModelBuilder":
    #     """Adds an attribute of the class in the model."""
    #     if not self.class_attributes.attributes:
    #         self.class_attributes.attributes = []
    #     self.class_attributes.attributes.append(attribute)
    #     return self

    def set_keywords(
        self, keyword_list: list[ClassKeywordModel] | None
    ) -> "ClassModelBuilder":
        """Sets the list of keywords to the class model."""
        self.class_attributes.keywords = keyword_list
        return self

    def _get_class_specific_attributes(self) -> dict[str, Any]:
        """Gets the class specific attributes."""
        return self.class_attributes.model_dump()

    @logging_decorator(message="Building ClassModel")
    def build(self) -> ClassModel:
        """Creates a ClassModel instance after building and setting the children models."""
        self.build_and_set_children()
        return ClassModel(
            **self._get_common_attributes(),
            **self._get_class_specific_attributes(),
        )



Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , 
from typing import TYPE_CHECKING, Any, Union
from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod
from abc import ABC, abstractmethod
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_decorators_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_bases_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_docstring_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_keywords_to_metadata

        None, None, None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ClassSpecificAttributes__*__FUNCTION-_convert_class_attributes_to_metadata_dict

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import TYPE_CHECKING, Any
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder

        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder

        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build

        None, None, None
        , 

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor

        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-visit_Comment

        None, None, None
        

Summary:

        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-get_node_position_data

        None, None, None
        , 

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel__*__FUNCTION-convert_comment_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:utilities:processing_context.py__*__MODULE__*__CLASS-PositionData

        None, None, 
from dataclasses import dataclass
        , 
import libcst
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange
from libcst._metadata_dependent import _UNDEFINED_DEFAULT
        

Summary:

        postcode:python_parser:visitors:node_processing:gather_dependencies.py__*__MODULE__*__FUNCTION-gather_and_set_children_dependencies

        None, 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata

        None, None, None
        , None, 
from pydantic import BaseModel, Field, validator
        , 
import re
        , 
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
import libcst
from libcst.metadata import MetadataWrapper
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater

        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-update_imports

        None, None, None
        , 

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder

        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes

        None, None, None
        

Summary:

        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build

        None, None, None
        , 
Code block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:
from __future__ import annotations

from typing import TYPE_CHECKING, Any, Union
from abc import ABC, abstractmethod

from postcode.models.models import (
    BaseCodeBlockModel,
    CommentModel,
    ImportModel,
    DependencyModel,
    BlockType,
)


if TYPE_CHECKING:
    from postcode.python_parser.model_builders.class_model_builder import (
        ClassModelBuilder,
    )
    from postcode.python_parser.model_builders.function_model_builder import (
        FunctionModelBuilder,
    )
    from postcode.python_parser.model_builders.module_model_builder import (
        ModuleModelBuilder,
    )
    from postcode.python_parser.model_builders.standalone_block_model_builder import (
        StandaloneBlockModelBuilder,
    )


class BaseModelBuilder(ABC):
    """
    Abstract base class for building models of different code blocks.

    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.

    Attributes:
        id (str): The unique identifier for the code block.
        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):
            A list of builders for the children code blocks.
        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.

    Example:
        # This example demonstrates how a derived builder might be initialized and used.
        >>> class SomeModelBuilder(BaseModelBuilder):
                def build(self):
                    # Building logic specific to 'SomeModelBuilder'
                    pass
        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')
        >>> builder.set_start_line_num(1).set_end_line_num(10)
        # Sets the start and end line numbers for the code block.
    """

    def __init__(
        self, *, id: str, block_type: BlockType, parent_id: str | None
    ) -> None:
        self.id: str = id
        self.children_builders: list[
            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder
        ] = []

        self.common_attributes = BaseCodeBlockModel(
            id=id,
            parent_id=parent_id,
            block_type=block_type,
            start_line_num=0,
            end_line_num=0,
            code_content="",
            important_comments=None,
            children=None,
            dependencies=None,
            summary=None,
        )

    def set_start_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the start line number of the code block model instance."""
        self.common_attributes.start_line_num = line_num
        return self

    def set_end_line_num(
        self, line_num: int
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the end line number of the code block model instance."""
        self.common_attributes.end_line_num = line_num
        return self

    def set_code_content(
        self, code_content: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds the string containing the content of the code block to the model instance."""
        self.common_attributes.code_content = code_content
        return self

    def add_important_comment(
        self, comment: CommentModel
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds an important comment to the model instance."""
        if not self.common_attributes.important_comments:
            self.common_attributes.important_comments = []
        self.common_attributes.important_comments.append(comment)
        return self

    def add_summary(
        self, summary: str
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a summary to the model instance."""
        self.common_attributes.summary = summary
        # print(f"Added summary to {self.common_attributes.id}")
        return self

    def add_child(
        self,
        child: Union[
            "ClassModelBuilder", "FunctionModelBuilder", StandaloneBlockModelBuilder
        ],
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Adds a child code block to the model instance."""
        self.children_builders.append(child)
        return self

    def set_dependencies(
        self, dependencies: list[ImportModel | DependencyModel] | None
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """Sets the dependencies of the model instance."""
        self.common_attributes.dependencies = dependencies
        return self

    def update_import_dependency(
        self,
        new_import_model: ImportModel,
        old_import_model: ImportModel,
    ) -> Union[
        "BaseModelBuilder",
        "ModuleModelBuilder",
        "ClassModelBuilder",
        "FunctionModelBuilder",
    ]:
        """
        Updates an import in the model instance.

        Args:
            new_import_model (ImportModel): The updated import model.
            old_import_model

        Returns:
            BaseModelBuilder: The base model builder instance.
        """

        if self.common_attributes.dependencies:
            import_model_to_remove: ImportModel | None = None
            for existing_import_model in self.common_attributes.dependencies:
                if isinstance(existing_import_model, DependencyModel):
                    continue

                if (
                    existing_import_model.import_names == old_import_model.import_names
                    and existing_import_model.imported_from
                    == old_import_model.imported_from
                    and existing_import_model.import_module_type
                    == old_import_model.import_module_type
                ):
                    import_model_to_remove = existing_import_model
                    break

            if not import_model_to_remove:
                raise Exception(f"Could not find import to remove: {old_import_model}")

            self.common_attributes.dependencies.remove(import_model_to_remove)
            self.common_attributes.dependencies.append(new_import_model)
        else:
            raise Exception(
                f"No imports in the builders imports list: {self.common_attributes.dependencies}"
            )
        return self

    def build_and_set_children(self) -> None:
        if self.children_builders:
            self.common_attributes.children = [
                child.build() for child in self.children_builders
            ]

    def _get_common_attributes(self) -> dict[str, Any]:
        """
        Returns a dictionary containing the attributes common to all code block models.
        """
        return self.common_attributes.model_dump()

    @abstractmethod
    def build(
        self,
    ) -> None:
        """
        Builds and returns the code block model instance.

        Returns:
            CodeBlockModel: The built code block model instance.
        """
        ...



Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator

        

Summary:

        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper

        None, None, None
        , None, None
        , None, 
from functools import wraps
import inspect
from inspect import FrameInfo
import logging
from logging import LogRecord, Logger
from typing import Callable
import libcst
        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType

        

Summary:

        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__

        None, None, None
        , None, 
from enum import Enum
        , 
from typing import Any
        , None
        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel

        

Summary:

        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel__*__FUNCTION-convert_to_metadata

        None, None, None
        , None, None
        

Summary:

        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer

        

Summary:

        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer__*__FUNCTION-summarize_code

        None, None, None
        

Summary:

        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer__*__FUNCTION-test_summarize_code

        None, None, None
        , None, 
from typing import Literal, Protocol
        , 
from dataclasses import dataclass
import logging
from pathlib import Path
        de:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper\n\n        None, None, None\n        , None, None\n        , None, \nfrom functools import wraps\nimport inspect\nfrom inspect import FrameInfo\nimport logging\nfrom logging import LogRecord, Logger\nfrom typing import Callable\nimport libcst\n        \nCode block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:\nfrom __future__ import annotations\n\nfrom typing import TYPE_CHECKING, Any, Union\nfrom abc import ABC, abstractmethod\n\nfrom postcode.models.models import (\n    BaseCodeBlockModel,\n    CommentModel,\n    ImportModel,\n    DependencyModel,\n    BlockType,\n)\n\n\nif TYPE_CHECKING:\n    from postcode.python_parser.model_builders.class_model_builder import (\n        ClassModelBuilder,\n    )\n    from postcode.python_parser.model_builders.function_model_builder import (\n        FunctionModelBuilder,\n    )\n    from postcode.python_parser.model_builders.module_model_builder import (\n        ModuleModelBuilder,\n    )\n    from postcode.python_parser.model_builders.standalone_block_model_builder import (\n        StandaloneBlockModelBuilder,\n    )\n\n\nclass BaseModelBuilder(ABC):\n    \"\"\"\n    Abstract base class for building models of different code blocks.\n\n    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.\n\n    Attributes:\n        id (str): The unique identifier for the code block.\n        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):\n            A list of builders for the children code blocks.\n        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.\n\n    Example:\n        # This example demonstrates how a derived builder might be initialized and used.\n        >>> class SomeModelBuilder(BaseModelBuilder):\n                def build(self):\n                    # Building logic specific to 'SomeModelBuilder'\n                    pass\n        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')\n        >>> builder.set_start_line_num(1).set_end_line_num(10)\n        # Sets the start and end line numbers for the code block.\n    \"\"\"\n\n    def __init__(\n        self, *, id: str, block_type: BlockType, parent_id: str | None\n    ) -> None:\n        self.id: str = id\n        self.children_builders: list[\n            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder\n        ] = []\n\n        self.common_attributes = BaseCodeBlockModel(\n            id=id,\n            parent_id=parent_id,\n            block_type=block_type,\n            start_line_num=0,\n            end_line_num=0,\n            code_content=\"\",\n            important_comments=None,\n            children=None,\n            dependencies=None,\n            summary=None,\n        )\n\n    def set_start_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the start line number of the code block model instance.\"\"\"\n        self.common_attributes.start_line_num = line_num\n        return self\n\n    def set_end_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the end line number of the code block model instance.\"\"\"\n        self.common_attributes.end_line_num = line_num\n        return self\n\n    def set_code_content(\n        self, code_content: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds the string containing the content of the code block to the model instance.\"\"\"\n        self.common_attributes.code_content = code_content\n        return self\n\n    def add_important_comment(\n        self, comment: CommentModel\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds an important comment to the model instance.\"\"\"\n        if not self.common_attributes.important_comments:\n            self.common_attributes.important_comments = []\n        self.common_attributes.important_comments.append(comment)\n        return self\n\n    def add_summary(\n        self, summary: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a summary to the model instance.\"\"\"\n        self.common_attributes.summary = summary\n        # print(f\"Added summary to {self.common_attributes.id}\")\n        return self\n\n    def add_child(\n        self,\n        child: Union[\n            \"ClassModelBuilder\", \"FunctionModelBuilder\", StandaloneBlockModelBuilder\n        ],\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a child code block to the model instance.\"\"\"\n        self.children_builders.append(child)\n        return self\n\n    def set_dependencies(\n        self, dependencies: list[ImportModel | DependencyModel] | None\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the dependencies of the model instance.\"\"\"\n        self.common_attributes.dependencies = dependencies\n        return self\n\n    def update_import_dependency(\n        self,\n        new_import_model: ImportModel,\n        old_import_model: ImportModel,\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"\n        Updates an import in the model instance.\n\n        Args:\n            new_import_model (ImportModel): The updated import model.\n            old_import_model\n\n        Returns:\n            BaseModelBuilder: The base model builder instance.\n        \"\"\"\n\n        if self.common_attributes.dependencies:\n            import_model_to_remove: ImportModel | None = None\n            for existing_import_model in self.common_attributes.dependencies:\n                if isinstance(existing_import_model, DependencyModel):\n                    continue\n\n                if (\n                    existing_import_model.import_names == old_import_model.import_names\n                    and existing_import_model.imported_from\n                    == old_import_model.imported_from\n                    and existing_import_model.import_module_type\n                    == old_import_model.import_module_type\n                ):\n                    import_model_to_remove = existing_import_model\n                    break\n\n            if not import_model_to_remove:\n                raise Exception(f\"Could not find import to remove: {old_import_model}\")\n\n            self.common_attributes.dependencies.remove(import_model_to_remove)\n            self.common_attributes.dependencies.append(new_import_model)\n        else:\n            raise Exception(\n                f\"No imports in the builders imports list: {self.common_attributes.dependencies}\"\n            )\n        return self\n\n    def build_and_set_children(self) -> None:\n        if self.children_builders:\n            self.common_attributes.children = [\n                child.build() for child in self.children_builders\n            ]\n\n    def _get_common_attributes(self) -> dict[str, Any]:\n        \"\"\"\n        Returns a dictionary containing the attributes common to all code block models.\n        \"\"\"\n        return self.common_attributes.model_dump()\n\n    @abstractmethod\n    def build(\n        self,\n    ) -> None:\n        \"\"\"\n        Builds and returns the code block model instance.\n\n        Returns:\n            CodeBlockModel: The built code block model instance.\n        \"\"\"\n        ...\n\n\n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType\n\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__\n\n        None, None, None\n        , None, \nfrom enum import Enum\n        , \nfrom typing import Any\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel\n\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata\n\n        None, None, None\n        , None, \nfrom pydantic import BaseModel, Field, validator\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel\n\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata\n\n        None, None, None\n        , None, \nfrom pydantic import BaseModel, Field, validator\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType\n\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__\n\n        None, None, None\n        , None, \nfrom enum import Enum\n        \n\nSummary:\n\n        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor\n\n        \n\nSummary:\n\n        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-visit_Comment\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:visitors:base_code_block_visitor.py__*__MODULE__*__CLASS-BaseVisitor__*__FUNCTION-get_node_position_data\n\n        None, None, None\n        , \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel\n\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-CommentModel__*__FUNCTION-convert_comment_to_metadata\n\n        None, None, None\n        , None, \nfrom pydantic import BaseModel, Field, validator\n        \n\nSummary:\n\n        postcode:utilities:processing_context.py__*__MODULE__*__CLASS-PositionData\n\n        None, None, \nfrom dataclasses import dataclass\n        , \nimport libcst\nfrom libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange\nfrom libcst.metadata import WhitespaceInclusivePositionProvider, CodeRange\nfrom libcst._metadata_dependent import _UNDEFINED_DEFAULT\n        \n\nSummary:\n\n        postcode:python_parser:visitors:node_processing:gather_dependencies.py__*__MODULE__*__FUNCTION-gather_and_set_children_dependencies\n\n        None, \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder\n\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build\n\n        None, None, None\n        , \nCode block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:\nfrom __future__ import annotations\n\nfrom typing import TYPE_CHECKING, Any, Union\nfrom abc import ABC, abstractmethod\n\nfrom postcode.models.models import (\n    BaseCodeBlockModel,\n    CommentModel,\n    ImportModel,\n    DependencyModel,\n    BlockType,\n)\n\n\nif TYPE_CHECKING:\n    from postcode.python_parser.model_builders.class_model_builder import (\n        ClassModelBuilder,\n    )\n    from postcode.python_parser.model_builders.function_model_builder import (\n        FunctionModelBuilder,\n    )\n    from postcode.python_parser.model_builders.module_model_builder import (\n        ModuleModelBuilder,\n    )\n    from postcode.python_parser.model_builders.standalone_block_model_builder import (\n        StandaloneBlockModelBuilder,\n    )\n\n\nclass BaseModelBuilder(ABC):\n    \"\"\"\n    Abstract base class for building models of different code blocks.\n\n    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.\n\n    Attributes:\n        id (str): The unique identifier for the code block.\n        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):\n            A list of builders for the children code blocks.\n        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.\n\n    Example:\n        # This example demonstrates how a derived builder might be initialized and used.\n        >>> class SomeModelBuilder(BaseModelBuilder):\n                def build(self):\n                    # Building logic specific to 'SomeModelBuilder'\n                    pass\n        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')\n        >>> builder.set_start_line_num(1).set_end_line_num(10)\n        # Sets the start and end line numbers for the code block.\n    \"\"\"\n\n    def __init__(\n        self, *, id: str, block_type: BlockType, parent_id: str | None\n    ) -> None:\n        self.id: str = id\n        self.children_builders: list[\n            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder\n        ] = []\n\n        self.common_attributes = BaseCodeBlockModel(\n            id=id,\n            parent_id=parent_id,\n            block_type=block_type,\n            start_line_num=0,\n            end_line_num=0,\n            code_content=\"\",\n            important_comments=None,\n            children=None,\n            dependencies=None,\n            summary=None,\n        )\n\n    def set_start_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the start line number of the code block model instance.\"\"\"\n        self.common_attributes.start_line_num = line_num\n        return self\n\n    def set_end_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the end line number of the code block model instance.\"\"\"\n        self.common_attributes.end_line_num = line_num\n        return self\n\n    def set_code_content(\n        self, code_content: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds the string containing the content of the code block to the model instance.\"\"\"\n        self.common_attributes.code_content = code_content\n        return self\n\n    def add_important_comment(\n        self, comment: CommentModel\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds an important comment to the model instance.\"\"\"\n        if not self.common_attributes.important_comments:\n            self.common_attributes.important_comments = []\n        self.common_attributes.important_comments.append(comment)\n        return self\n\n    def add_summary(\n        self, summary: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a summary to the model instance.\"\"\"\n        self.common_attributes.summary = summary\n        # print(f\"Added summary to {self.common_attributes.id}\")\n        return self\n\n    def add_child(\n        self,\n        child: Union[\n            \"ClassModelBuilder\", \"FunctionModelBuilder\", StandaloneBlockModelBuilder\n        ],\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a child code block to the model instance.\"\"\"\n        self.children_builders.append(child)\n        return self\n\n    def set_dependencies(\n        self, dependencies: list[ImportModel | DependencyModel] | None\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the dependencies of the model instance.\"\"\"\n        self.common_attributes.dependencies = dependencies\n        return self\n\n    def update_import_dependency(\n        self,\n        new_import_model: ImportModel,\n        old_import_model: ImportModel,\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"\n        Updates an import in the model instance.\n\n        Args:\n            new_import_model (ImportModel): The updated import model.\n            old_import_model\n\n        Returns:\n            BaseModelBuilder: The base model builder instance.\n        \"\"\"\n\n        if self.common_attributes.dependencies:\n            import_model_to_remove: ImportModel | None = None\n            for existing_import_model in self.common_attributes.dependencies:\n                if isinstance(existing_import_model, DependencyModel):\n                    continue\n\n                if (\n                    existing_import_model.import_names == old_import_model.import_names\n                    and existing_import_model.imported_from\n                    == old_import_model.imported_from\n                    and existing_import_model.import_module_type\n                    == old_import_model.import_module_type\n                ):\n                    import_model_to_remove = existing_import_model\n                    break\n\n            if not import_model_to_remove:\n                raise Exception(f\"Could not find import to remove: {old_import_model}\")\n\n            self.common_attributes.dependencies.remove(import_model_to_remove)\n            self.common_attributes.dependencies.append(new_import_model)\n        else:\n            raise Exception(\n                f\"No imports in the builders imports list: {self.common_attributes.dependencies}\"\n            )\n        return self\n\n    def build_and_set_children(self) -> None:\n        if self.children_builders:\n            self.common_attributes.children = [\n                child.build() for child in self.children_builders\n            ]\n\n    def _get_common_attributes(self) -> dict[str, Any]:\n        \"\"\"\n        Returns a dictionary containing the attributes common to all code block models.\n        \"\"\"\n        return self.common_attributes.model_dump()\n\n    @abstractmethod\n    def build(\n        self,\n    ) -> None:\n        \"\"\"\n        Builds and returns the code block model instance.\n\n        Returns:\n            CodeBlockModel: The built code block model instance.\n        \"\"\"\n        ...\n\n\n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper\n\n        None, None, None\n        , None, None\n        , None, \nfrom functools import wraps\nimport inspect\nfrom inspect import FrameInfo\nimport logging\nfrom logging import LogRecord, Logger\nfrom typing import Callable\nimport libcst\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType\n\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__\n\n        None, None, None\n        , None, \nfrom enum import Enum\n        , \nfrom typing import Any\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel\n\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata\n\n        None, None, None\n        , None, \nfrom pydantic import BaseModel, Field, validator\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel\n\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ImportModel__*__FUNCTION-convert_import_to_metadata\n\n        None, None, None\n        , None, \nfrom pydantic import BaseModel, Field, validator\n        , \nimport re\n        , \nimport libcst\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType\n\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__\n\n        None, None, None\n        , None, \nfrom enum import Enum\n        , \nimport libcst\nfrom libcst.metadata import MetadataWrapper\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater\n\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater__*__FUNCTION-update_imports\n\n        None, None, None\n        , \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder\n\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build\n\n        None, None, None\n        , \nCode block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:\nfrom __future__ import annotations\n\nfrom typing import TYPE_CHECKING, Any, Union\nfrom abc import ABC, abstractmethod\n\nfrom postcode.models.models import (\n    BaseCodeBlockModel,\n    CommentModel,\n    ImportModel,\n    DependencyModel,\n    BlockType,\n)\n\n\nif TYPE_CHECKING:\n    from postcode.python_parser.model_builders.class_model_builder import (\n        ClassModelBuilder,\n    )\n    from postcode.python_parser.model_builders.function_model_builder import (\n        FunctionModelBuilder,\n    )\n    from postcode.python_parser.model_builders.module_model_builder import (\n        ModuleModelBuilder,\n    )\n    from postcode.python_parser.model_builders.standalone_block_model_builder import (\n        StandaloneBlockModelBuilder,\n    )\n\n\nclass BaseModelBuilder(ABC):\n    \"\"\"\n    Abstract base class for building models of different code blocks.\n\n    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.\n\n    Attributes:\n        id (str): The unique identifier for the code block.\n        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):\n            A list of builders for the children code blocks.\n        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.\n\n    Example:\n        # This example demonstrates how a derived builder might be initialized and used.\n        >>> class SomeModelBuilder(BaseModelBuilder):\n                def build(self):\n                    # Building logic specific to 'SomeModelBuilder'\n                    pass\n        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')\n        >>> builder.set_start_line_num(1).set_end_line_num(10)\n        # Sets the start and end line numbers for the code block.\n    \"\"\"\n\n    def __init__(\n        self, *, id: str, block_type: BlockType, parent_id: str | None\n    ) -> None:\n        self.id: str = id\n        self.children_builders: list[\n            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder\n        ] = []\n\n        self.common_attributes = BaseCodeBlockModel(\n            id=id,\n            parent_id=parent_id,\n            block_type=block_type,\n            start_line_num=0,\n            end_line_num=0,\n            code_content=\"\",\n            important_comments=None,\n            children=None,\n            dependencies=None,\n            summary=None,\n        )\n\n    def set_start_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the start line number of the code block model instance.\"\"\"\n        self.common_attributes.start_line_num = line_num\n        return self\n\n    def set_end_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the end line number of the code block model instance.\"\"\"\n        self.common_attributes.end_line_num = line_num\n        return self\n\n    def set_code_content(\n        self, code_content: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds the string containing the content of the code block to the model instance.\"\"\"\n        self.common_attributes.code_content = code_content\n        return self\n\n    def add_important_comment(\n        self, comment: CommentModel\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds an important comment to the model instance.\"\"\"\n        if not self.common_attributes.important_comments:\n            self.common_attributes.important_comments = []\n        self.common_attributes.important_comments.append(comment)\n        return self\n\n    def add_summary(\n        self, summary: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a summary to the model instance.\"\"\"\n        self.common_attributes.summary = summary\n        # print(f\"Added summary to {self.common_attributes.id}\")\n        return self\n\n    def add_child(\n        self,\n        child: Union[\n            \"ClassModelBuilder\", \"FunctionModelBuilder\", StandaloneBlockModelBuilder\n        ],\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a child code block to the model instance.\"\"\"\n        self.children_builders.append(child)\n        return self\n\n    def set_dependencies(\n        self, dependencies: list[ImportModel | DependencyModel] | None\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the dependencies of the model instance.\"\"\"\n        self.common_attributes.dependencies = dependencies\n        return self\n\n    def update_import_dependency(\n        self,\n        new_import_model: ImportModel,\n        old_import_model: ImportModel,\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"\n        Updates an import in the model instance.\n\n        Args:\n            new_import_model (ImportModel): The updated import model.\n            old_import_model\n\n        Returns:\n            BaseModelBuilder: The base model builder instance.\n        \"\"\"\n\n        if self.common_attributes.dependencies:\n            import_model_to_remove: ImportModel | None = None\n            for existing_import_model in self.common_attributes.dependencies:\n                if isinstance(existing_import_model, DependencyModel):\n                    continue\n\n                if (\n                    existing_import_model.import_names == old_import_model.import_names\n                    and existing_import_model.imported_from\n                    == old_import_model.imported_from\n                    and existing_import_model.import_module_type\n                    == old_import_model.import_module_type\n                ):\n                    import_model_to_remove = existing_import_model\n                    break\n\n            if not import_model_to_remove:\n                raise Exception(f\"Could not find import to remove: {old_import_model}\")\n\n            self.common_attributes.dependencies.remove(import_model_to_remove)\n            self.common_attributes.dependencies.append(new_import_model)\n        else:\n            raise Exception(\n                f\"No imports in the builders imports list: {self.common_attributes.dependencies}\"\n            )\n        return self\n\n    def build_and_set_children(self) -> None:\n        if self.children_builders:\n            self.common_attributes.children = [\n                child.build() for child in self.children_builders\n            ]\n\n    def _get_common_attributes(self) -> dict[str, Any]:\n        \"\"\"\n        Returns a dictionary containing the attributes common to all code block models.\n        \"\"\"\n        return self.common_attributes.model_dump()\n\n    @abstractmethod\n    def build(\n        self,\n    ) -> None:\n        \"\"\"\n        Builds and returns the code block model instance.\n\n        Returns:\n            CodeBlockModel: The built code block model instance.\n        \"\"\"\n        ...\n\n\n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper\n\n        None, None, None\n        , None, None\n        , None, \nfrom functools import wraps\nimport inspect\nfrom inspect import FrameInfo\nimport logging\nfrom logging import LogRecord, Logger\nfrom typing import Callable\nimport libcst\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType\n\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__\n\n        None, None, None\n        , None, \nfrom enum import Enum\n        , \nfrom typing import Any\n        , None\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel\n\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel__*__FUNCTION-convert_to_metadata\n\n        None, None, None\n        , None, None\n        \n\nSummary:\n\n        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer\n\n        \n\nSummary:\n\n        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer__*__FUNCTION-summarize_code\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:ai_services:summarizer:summarization_context.py__*__MODULE__*__CLASS-Summarizer__*__FUNCTION-test_summarize_code\n\n        None, None, None\n        , None, \nfrom typing import Literal, Protocol\n        , \nfrom dataclasses import dataclass\nimport logging\nfrom pathlib import Path\n        ","children":[{"variable_assignments":["EXCLUDED_DIRECTORIES: set[str] = {\".venv\", \"node_modules\", \"__pycache__\", \".git\"}"],"id":"postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__STANDALONE_BLOCK-1","parent_id":"postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE","block_type":"STANDALONE_BLOCK","start_line_num":17,"end_line_num":19,"code_content":"EXCLUDED_DIRECTORIES: set[str] = {\".venv\", \"node_modules\", \"__pycache__\", \".git\"}\n","important_comments":null,"dependencies":[],"summary":"\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__STANDALONE_BLOCK-1\n\n        None, None, None\n        ","children":null},{"class_name":"VisitorManagerProcessFilesReturn","decorators":[{"content":"@dataclass","decorator_name":"dataclass","decorator_args":null}],"bases":null,"docstring":"Represents the return value of the VisitorManager.process_files() method.\n\nAttributes:\n    - models_tuple (tuple[ModuleModel, ...]): A tuple of ModuleModel objects representing the parsed modules.\n    - directory_modules (dict[str, list[str]]): A dictionary mapping directory paths to lists of module names.\n        This is used to keep track of the modules present in each directory.","keywords":null,"id":"postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManagerProcessFilesReturn","parent_id":"postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE","block_type":"CLASS","start_line_num":19,"end_line_num":34,"code_content":"\n\n@dataclass\nclass VisitorManagerProcessFilesReturn:\n    \"\"\"\n    Represents the return value of the VisitorManager.process_files() method.\n\n    Attributes:\n        - models_tuple (tuple[ModuleModel, ...]): A tuple of ModuleModel objects representing the parsed modules.\n        - directory_modules (dict[str, list[str]]): A dictionary mapping directory paths to lists of module names.\n            This is used to keep track of the modules present in each directory.\n    \"\"\"\n\n    models_tuple: tuple[ModuleModel, ...]\n    directory_modules: dict[str, list[str]]\n","important_comments":null,"dependencies":[{"code_block_id":"postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager"},{"import_names":[{"name":"dataclass","as_name":null,"local_block_id":null}],"imported_from":"dataclasses","import_module_type":"STANDARD_LIBRARY","local_module_id":null},{"import_names":[{"name":"ModuleModel","as_name":null,"local_block_id":"postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel"}],"imported_from":"postcode.models.models","import_module_type":"LOCAL","local_module_id":"postcode:models:models.py__*__MODULE"}],"summary":"\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManagerProcessFilesReturn\n\n        None, \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel\n\n        \n\nSummary:\n\n        postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel__*__FUNCTION-convert_to_metadata\n\n        None, None, None\n        , None, None\n        , \nfrom dataclasses import dataclass\n        ","children":null},{"class_name":"VisitorManager","decorators":null,"bases":null,"docstring":"Manages the visiting and processing of Python files in a given directory.\n\nThis class scans a specified directory, filters for Python files, parses them, and saves the parsed data in a structured JSON format. It also maintains a mapping of directories to the Python files they contain.\n\nAttributes:\n    directory (str): The root directory to scan for Python files.\n    output_directory (str): The directory where output JSON files will be saved.\n    directory_modules (dict): A mapping of directories to their contained Python files.\n\nExample:\n    >>> visitor_manager = VisitorManager(\"/path/to/python/code\", \"output\")\n    >>> visitor_manager.process_files()\n    # This will process all Python files in /path/to/python/code and save their parsed data in the output directory.","keywords":null,"id":"postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager","parent_id":"postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE","block_type":"CLASS","start_line_num":34,"end_line_num":171,"code_content":"\n\nclass VisitorManager:\n    \"\"\"\n    Manages the visiting and processing of Python files in a given directory.\n\n    This class scans a specified directory, filters for Python files, parses them, and saves the parsed data in a structured JSON format. It also maintains a mapping of directories to the Python files they contain.\n\n    Attributes:\n        directory (str): The root directory to scan for Python files.\n        output_directory (str): The directory where output JSON files will be saved.\n        directory_modules (dict): A mapping of directories to their contained Python files.\n\n    Example:\n        >>> visitor_manager = VisitorManager(\"/path/to/python/code\", \"output\")\n        >>> visitor_manager.process_files()\n        # This will process all Python files in /path/to/python/code and save their parsed data in the output directory.\n    \"\"\"\n\n    @logging_decorator(message=\"Initializing VisitorManager\")\n    def __init__(self, directory: str, output_directory: str = \"output_json\") -> None:\n        self.directory: str = directory\n        self.output_directory: str = output_directory\n        self.directory_modules: dict[str, list[str]] = {}\n\n    def process_files(self) -> VisitorManagerProcessFilesReturn:\n        \"\"\"\n        Process the files in the directory and return the module models.\n\n        This function iterates through all the Python files in the directory, processes each file,\n        updates the imports, and builds module models for each file. It returns a tuple of module models\n        and a dictionary of directory modules.\n\n        Returns:\n            A named tuple (VisitorManagerProcessFilesReturn) containing:\n            - models_tuple (tuple[ModuleModel, ...]): A tuple of module models.\n            - directory_modules (dict[str, ModuleModel]): A dictionary of directory modules.\n\n        Examples:\n            >>> visitor_manager = VisitorManager()\n            >>> result = visitor_manager.process_files()\n            >>> print(result.models_tuple)\n            (ModuleModel(file_path='/path/to/file1.py'), ModuleModel(file_path='/path/to/file2.py'))\n            >>> print(result.directory_modules)\n            {'/path/to/directory1': ModuleModel(file_path='/path/to/directory1/__init__.py')}\n        \"\"\"\n\n        logging.info(\"Processing files\")\n        python_files: list[str] = self._get_python_files()\n        model_builder_list: list[ModuleModelBuilder] = []\n        for file_path in python_files:\n            if model_builder := self._process_file(file_path):\n                model_builder_list.append((model_builder))\n\n        logging.info(\"File processing completed\")\n        logging.info(\"Updating imports\")\n\n        # TODO: Test making this a tuple of tuples, see if that solves the double update import issue\n        model_builder_tuple: tuple[ModuleModelBuilder, ...] = tuple(model_builder_list)\n\n        import_and_dependency_updater = ImportAndDependencyUpdater(model_builder_tuple)\n        import_and_dependency_updater.update_imports()\n        logging.info(\"Updated imports\")\n\n        module_models_list: list[ModuleModel] = []\n        for module_model_builder in model_builder_tuple:\n            module_model: ModuleModel = self._build_module_model(module_model_builder)\n            module_models_list.append(module_model)\n\n        module_models_tuple: tuple[ModuleModel, ...] = tuple(module_models_list)\n\n        return VisitorManagerProcessFilesReturn(\n            models_tuple=module_models_tuple, directory_modules=self.directory_modules\n        )\n\n    def _walk_directories(self) -> list[str]:\n        \"\"\"Walks the specified directory and returns a list of all files.\"\"\"\n\n        all_files: list[str] = []\n        for file_path in Path(self.directory).rglob(\"*\"):\n            if not any(\n                excluded in file_path.parts for excluded in EXCLUDED_DIRECTORIES\n            ):\n                all_files.append(str(file_path))\n        return all_files\n\n    def _filter_python_files(self, files: list[str]) -> list[str]:\n        \"\"\"Filters a list of files to only include Python files.\"\"\"\n\n        return [file for file in files if file.endswith(\".py\")]\n\n    @logging_decorator(message=\"Getting Python files\")\n    def _get_python_files(self) -> list[str]:\n        \"\"\"Gets all Python files in the specified directory.\"\"\"\n\n        all_files: list[str] = self._walk_directories()\n        return self._filter_python_files(all_files)\n\n    def _process_file(self, file_path: str) -> ModuleModelBuilder | None:\n        \"\"\"Processes a single Python file.\"\"\"\n\n        file_path_obj = Path(file_path)\n        root = str(file_path_obj.parent)\n        self.directory_modules.setdefault(root, []).append(file_path_obj.name)\n        return self._parse_file(file_path)\n\n    @logging_decorator(message=\"Processing file\")\n    def _parse_file(self, file_path: str) -> ModuleModelBuilder | None:\n        \"\"\"Parses a Python file and saves the parsed data as JSON.\"\"\"\n\n        parser = PythonParser(file_path)\n        code: str = parser.open_file()\n        module_model_builder: ModuleModelBuilder | None = parser.parse(code)\n\n        return module_model_builder\n\n    def _build_module_model(\n        self, visitor_stack: ModuleModelBuilder | None\n    ) -> ModuleModel:\n        \"\"\"\n        Builds a module model from the provided module builder.\n\n        Args:\n            visitor_stack (ModuleModelBuilder): The module builder to build the model from.\n\n        Returns:\n            ModuleModel: A structured module model.\n\n        Example:\n            >>> module_model = python_parser.build_module_model(visitor_stack)\n            # Builds a module model from the provided module builder.\n        \"\"\"\n\n        if not isinstance(visitor_stack, ModuleModelBuilder):\n            raise TypeError(\"Expected the first builder to be a ModuleModelBuilder\")\n\n        return visitor_stack.build()\n","important_comments":null,"dependencies":[{"code_block_id":"postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManagerProcessFilesReturn"},{"import_names":[{"name":"logging","as_name":null,"local_block_id":null}],"imported_from":null,"import_module_type":"STANDARD_LIBRARY","local_module_id":null},{"import_names":[{"name":"Path","as_name":null,"local_block_id":null}],"imported_from":"pathlib","import_module_type":"STANDARD_LIBRARY","local_module_id":null},{"import_names":[{"name":"ModuleModelBuilder","as_name":null,"local_block_id":"postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder"}],"imported_from":"postcode.python_parser.model_builders.module_model_builder","import_module_type":"LOCAL","local_module_id":"postcode:python_parser:model_builders:module_model_builder.py__*__MODULE"},{"import_names":[{"name":"logging_decorator","as_name":null,"local_block_id":"postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator"}],"imported_from":"postcode.utilities.logger.decorators","import_module_type":"LOCAL","local_module_id":"postcode:utilities:logger:decorators.py__*__MODULE"},{"import_names":[{"name":"PythonParser","as_name":null,"local_block_id":"postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser"}],"imported_from":"postcode.python_parser.parsers.python_parser","import_module_type":"LOCAL","local_module_id":"postcode:python_parser:parsers:python_parser.py__*__MODULE"},{"import_names":[{"name":"ImportAndDependencyUpdater","as_name":null,"local_block_id":"postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE__*__CLASS-ImportAndDependencyUpdater"}],"imported_from":"postcode.python_parser.visitor_manager.import_and_dependency_updater","import_module_type":"LOCAL","local_module_id":"postcode:python_parser:visitor_manager:import_and_dependency_updater.py__*__MODULE"},{"import_names":[{"name":"ModuleModel","as_name":null,"local_block_id":"postcode:models:models.py__*__MODULE__*__CLASS-ModuleModel"}],"imported_from":"postcode.models.models","import_module_type":"LOCAL","local_module_id":"postcode:models:models.py__*__MODULE"}],"summary":"\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager\n\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-process_files\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_walk_directories\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_filter_python_files\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_get_python_files\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_process_file\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_parse_file\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:visitor_manager:visitor_manager.py__*__MODULE__*__CLASS-VisitorManager__*__FUNCTION-_build_module_model\n\n        None, None, None\n        , \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder\n\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build\n\n        None, None, None\n        , \nCode block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:\nfrom __future__ import annotations\n\nfrom typing import TYPE_CHECKING, Any, Union\nfrom abc import ABC, abstractmethod\n\nfrom postcode.models.models import (\n    BaseCodeBlockModel,\n    CommentModel,\n    ImportModel,\n    DependencyModel,\n    BlockType,\n)\n\n\nif TYPE_CHECKING:\n    from postcode.python_parser.model_builders.class_model_builder import (\n        ClassModelBuilder,\n    )\n    from postcode.python_parser.model_builders.function_model_builder import (\n        FunctionModelBuilder,\n    )\n    from postcode.python_parser.model_builders.module_model_builder import (\n        ModuleModelBuilder,\n    )\n    from postcode.python_parser.model_builders.standalone_block_model_builder import (\n        StandaloneBlockModelBuilder,\n    )\n\n\nclass BaseModelBuilder(ABC):\n    \"\"\"\n    Abstract base class for building models of different code blocks.\n\n    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.\n\n    Attributes:\n        id (str): The unique identifier for the code block.\n        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):\n            A list of builders for the children code blocks.\n        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.\n\n    Example:\n        # This example demonstrates how a derived builder might be initialized and used.\n        >>> class SomeModelBuilder(BaseModelBuilder):\n                def build(self):\n                    # Building logic specific to 'SomeModelBuilder'\n                    pass\n        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')\n        >>> builder.set_start_line_num(1).set_end_line_num(10)\n        # Sets the start and end line numbers for the code block.\n    \"\"\"\n\n    def __init__(\n        self, *, id: str, block_type: BlockType, parent_id: str | None\n    ) -> None:\n        self.id: str = id\n        self.children_builders: list[\n            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder\n        ] = []\n\n        self.common_attributes = BaseCodeBlockModel(\n            id=id,\n            parent_id=parent_id,\n            block_type=block_type,\n            start_line_num=0,\n            end_line_num=0,\n            code_content=\"\",\n            important_comments=None,\n            children=None,\n            dependencies=None,\n            summary=None,\n        )\n\n    def set_start_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the start line number of the code block model instance.\"\"\"\n        self.common_attributes.start_line_num = line_num\n        return self\n\n    def set_end_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the end line number of the code block model instance.\"\"\"\n        self.common_attributes.end_line_num = line_num\n        return self\n\n    def set_code_content(\n        self, code_content: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds the string containing the content of the code block to the model instance.\"\"\"\n        self.common_attributes.code_content = code_content\n        return self\n\n    def add_important_comment(\n        self, comment: CommentModel\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds an important comment to the model instance.\"\"\"\n        if not self.common_attributes.important_comments:\n            self.common_attributes.important_comments = []\n        self.common_attributes.important_comments.append(comment)\n        return self\n\n    def add_summary(\n        self, summary: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a summary to the model instance.\"\"\"\n        self.common_attributes.summary = summary\n        # print(f\"Added summary to {self.common_attributes.id}\")\n        return self\n\n    def add_child(\n        self,\n        child: Union[\n            \"ClassModelBuilder\", \"FunctionModelBuilder\", StandaloneBlockModelBuilder\n        ],\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a child code block to the model instance.\"\"\"\n        self.children_builders.append(child)\n        return self\n\n    def set_dependencies(\n        self, dependencies: list[ImportModel | DependencyModel] | None\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the dependencies of the model instance.\"\"\"\n        self.common_attributes.dependencies = dependencies\n        return self\n\n    def update_import_dependency(\n        self,\n        new_import_model: ImportModel,\n        old_import_model: ImportModel,\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"\n        Updates an import in the model instance.\n\n        Args:\n            new_import_model (ImportModel): The updated import model.\n            old_import_model\n\n        Returns:\n            BaseModelBuilder: The base model builder instance.\n        \"\"\"\n\n        if self.common_attributes.dependencies:\n            import_model_to_remove: ImportModel | None = None\n            for existing_import_model in self.common_attributes.dependencies:\n                if isinstance(existing_import_model, DependencyModel):\n                    continue\n\n                if (\n                    existing_import_model.import_names == old_import_model.import_names\n                    and existing_import_model.imported_from\n                    == old_import_model.imported_from\n                    and existing_import_model.import_module_type\n                    == old_import_model.import_module_type\n                ):\n                    import_model_to_remove = existing_import_model\n                    break\n\n            if not import_model_to_remove:\n                raise Exception(f\"Could not find import to remove: {old_import_model}\")\n\n            self.common_attributes.dependencies.remove(import_model_to_remove)\n            self.common_attributes.dependencies.append(new_import_model)\n        else:\n            raise Exception(\n                f\"No imports in the builders imports list: {self.common_attributes.dependencies}\"\n            )\n        return self\n\n    def build_and_set_children(self) -> None:\n        if self.children_builders:\n            self.common_attributes.children = [\n                child.build() for child in self.children_builders\n            ]\n\n    def _get_common_attributes(self) -> dict[str, Any]:\n        \"\"\"\n        Returns a dictionary containing the attributes common to all code block models.\n        \"\"\"\n        return self.common_attributes.model_dump()\n\n    @abstractmethod\n    def build(\n        self,\n    ) -> None:\n        \"\"\"\n        Builds and returns the code block model instance.\n\n        Returns:\n            CodeBlockModel: The built code block model instance.\n        \"\"\"\n        ...\n\n\n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper\n\n        None, None, None\n        , None, None\n        , None, \nfrom functools import wraps\nimport inspect\nfrom inspect import FrameInfo\nimport logging\nfrom logging import LogRecord, Logger\nfrom typing import Callable\nimport libcst\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType\n\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__\n\n        None, None, None\n        , None, \nfrom enum import Enum\n        , \nfrom typing import Any\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper\n\n        None, None, None\n        , None, None\n        , None, \nfrom functools import wraps\nimport inspect\nfrom inspect import FrameInfo\nimport logging\nfrom logging import LogRecord, Logger\nfrom typing import Callable\nimport libcst\n        \n\nSummary:\n\n        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser\n\n        \n\nSummary:\n\n        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-open_file\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:parsers:python_parser.py__*__MODULE__*__CLASS-PythonParser__*__FUNCTION-parse\n\n        None, None, None\n        , \n\nSummary:\n\n        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy\n\n        \n\nSummary:\n\n        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-generate_id\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:id_generation:id_generation_strategies.py__*__MODULE__*__CLASS-ModuleIDGenerationStrategy__*__FUNCTION-converted_path_string\n\n        None, None, None\n        , None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory\n\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance\n\n        None, None, None\n        \nChild (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:\n\n@staticmethod\n@overload\ndef create_builder_instance(\n    block_type: Literal[BlockType.CLASS],\n    *,\n    id: str,\n    name: str,\n    parent_id: str,\n) -> ClassModelBuilder:\n    \"\"\"\n        Creates a ClassModelBuilder instance for building class models.\n\n        Args:\n            block_type: Specifies that a ClassModelBuilder is to be created.\n            id (str): The unique identifier for the class model.\n            name (str): The name of the class.\n            parent_id (str): The identifier of the parent model.\n\n        Returns:\n            ClassModelBuilder: An instance of ClassModelBuilder.\n        \"\"\"\n    ...\n\n\nChild (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:\n\n@staticmethod\n@overload\ndef create_builder_instance(\n    block_type: Literal[BlockType.FUNCTION],\n    *,\n    id: str,\n    name: str,\n    parent_id: str,\n) -> FunctionModelBuilder:\n    \"\"\"\n        Creates a FunctionModelBuilder instance for building function models.\n\n        Args:\n            block_type: Specifies that a FunctionModelBuilder is to be created.\n            id (str): The unique identifier for the function model.\n            name (str): The name of the function.\n            parent_id (str): The identifier of the parent model.\n\n        Returns:\n            FunctionModelBuilder: An instance of FunctionModelBuilder.\n        \"\"\"\n    ...\n\n\nChild (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:\n\n@staticmethod\n@overload\ndef create_builder_instance(\n    block_type: Literal[BlockType.STANDALONE_CODE_BLOCK],\n    *,\n    id: str,\n    parent_id: str,\n) -> StandaloneBlockModelBuilder:\n    \"\"\"\n        Creates a StandaloneBlockModelBuilder instance for building standalone code block models.\n\n        Args:\n            block_type: Specifies that a StandaloneBlockModelBuilder is to be created.\n            id (str): The unique identifier for the standalone code block model.\n            parent_id (str): The identifier of the parent model.\n\n        Returns:\n            StandaloneBlockModelBuilder: An instance of StandaloneBlockModelBuilder.\n        \"\"\"\n    ...\n\n\nChild (postcode:python_parser:model_builders:builder_factory.py__*__MODULE__*__CLASS-BuilderFactory__*__FUNCTION-create_builder_instance) code content:\n\n@logging_decorator()\n@staticmethod\ndef create_builder_instance(\n    block_type: BlockType,\n    *,\n    id: str,\n    name: str | None = None,\n    parent_id: str | None = None,\n    file_path: str | None = None,\n) -> (\n    ModuleModelBuilder\n    | ClassModelBuilder\n    | FunctionModelBuilder\n    | StandaloneBlockModelBuilder\n):\n    \"\"\"\n        Creates and returns an instance of a model builder based on the specified block type.\n\n        Depending on the block type (module, class, function, standalone code block), it creates an instance of the corresponding model builder class.\n\n        Args:\n            block_type (BlockType): The type of code block for which the builder is to be created.\n            id (str): The unique identifier for the builder.\n            name (str | None): The name of the code block (relevant for class or function blocks).\n            parent_id (str | None): The identifier of the parent model (if applicable).\n            file_path (str | None): The file path of the module (relevant for module blocks).\n\n        Returns:\n            Union[ModuleModelBuilder, ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]:\n            An instance of the appropriate model builder class.\n\n        Raises:\n            ValueError: If an unknown block type is provided.\n\n        Example:\n            >>> builder = BuilderFactory.create_builder_instance(\n                    block_type=BlockType.CLASS,\n                    id='class1',\n                    name='MyClass',\n                    parent_id='module1'\n                )\n            # This will create an instance of ClassModelBuilder for a class named 'MyClass'.\n        \"\"\"\n\n    if block_type not in BuilderFactory._creation_strategies:\n        raise ValueError(f\"Unknown node type: {block_type}\")\n    return BuilderFactory._creation_strategies[block_type](\n        id=id, name=name, parent_id=parent_id, file_path=file_path\n    )\n\n, \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper\n\n        None, None, None\n        , None, None\n        , None, \nfrom functools import wraps\nimport inspect\nfrom inspect import FrameInfo\nimport logging\nfrom logging import LogRecord, Logger\nfrom typing import Callable\nimport libcst\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder\n\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_decorators\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_bases\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_docstring\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-set_keywords\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-_get_class_specific_attributes\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:class_model_builder.py__*__MODULE__*__CLASS-ClassModelBuilder__*__FUNCTION-build\n\n        None, None, None\n        , \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper\n\n        None, None, None\n        , None, None\n        , None, \nfrom functools import wraps\nimport inspect\nfrom inspect import FrameInfo\nimport logging\nfrom logging import LogRecord, Logger\nfrom typing import Callable\nimport libcst\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder\n\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_start_line_num\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_end_line_num\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_code_content\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_important_comment\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_summary\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-add_child\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-set_dependencies\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-update_import_dependency\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build_and_set_children\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-_get_common_attributes\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:base_model_builder.py__*__MODULE__*__CLASS-BaseModelBuilder__*__FUNCTION-build\n\n        None, None, None\n        , \nCode block import (postcode:python_parser:model_builders:class_model_builder.py__*__MODULE) code content:\nfrom __future__ import annotations\nfrom typing import TYPE_CHECKING, Any\n\nfrom postcode.utilities.logger.decorators import logging_decorator\n\nfrom postcode.python_parser.model_builders.base_model_builder import BaseModelBuilder\nfrom postcode.models.models import ClassSpecificAttributes, ClassModel\nfrom postcode.models.enums import BlockType\n\n\nif TYPE_CHECKING:\n    from postcode.models.models import (\n        ClassKeywordModel,\n        DecoratorModel,\n    )\n\n\nclass ClassModelBuilder(BaseModelBuilder):\n    \"\"\"\n    A builder class for constructing a model of a Python class.\n\n    This class extends BaseModelBuilder and is specialized for building a model of a Python class, capturing details such as decorators, base classes, documentation strings, class attributes, and class-specific keywords.\n\n    Attributes:\n        class_attributes (ClassSpecificAttributes): An instance containing attributes specific to a class, like name, decorators, bases, etc.\n\n    Args:\n        id (str): The unique identifier for the class model.\n        class_name (str): The name of the class.\n        parent_id (str): The identifier of the parent model (e.g., module or class containing this class).\n    \"\"\"\n\n    def __init__(self, id: str, class_name: str, parent_id: str) -> None:\n        super().__init__(id=id, block_type=BlockType.CLASS, parent_id=parent_id)\n\n        self.class_attributes = ClassSpecificAttributes(\n            class_name=class_name,\n            decorators=None,\n            bases=None,\n            docstring=None,\n            keywords=None,\n        )\n\n    def set_decorators(\n        self, decorators: list[DecoratorModel] | None\n    ) -> \"ClassModelBuilder\":\n        \"\"\"Adds decorator to the decorators list in the class model.\"\"\"\n        if decorators:\n            self.class_attributes.decorators = decorators\n        else:\n            self.class_attributes.decorators = None\n        return self\n\n    def set_bases(self, base_classes: list[str] | None) -> \"ClassModelBuilder\":\n        \"\"\"Sets the list of base classes to the class model.\"\"\"\n        self.class_attributes.bases = base_classes\n        return self\n\n    def set_docstring(self, docstring: str | None) -> \"ClassModelBuilder\":\n        \"\"\"Sets the docstring of the class in the model.\"\"\"\n        self.class_attributes.docstring = docstring\n        return self\n\n    # # TODO: Add attribute model\n    # def add_attribute(self, attribute) -> \"ClassModelBuilder\":\n    #     \"\"\"Adds an attribute of the class in the model.\"\"\"\n    #     if not self.class_attributes.attributes:\n    #         self.class_attributes.attributes = []\n    #     self.class_attributes.attributes.append(attribute)\n    #     return self\n\n    def set_keywords(\n        self, keyword_list: list[ClassKeywordModel] | None\n    ) -> \"ClassModelBuilder\":\n        \"\"\"Sets the list of keywords to the class model.\"\"\"\n        self.class_attributes.keywords = keyword_list\n        return self\n\n    def _get_class_specific_attributes(self) -> dict[str, Any]:\n        \"\"\"Gets the class specific attributes.\"\"\"\n        return self.class_attributes.model_dump()\n\n    @logging_decorator(message=\"Building ClassModel\")\n    def build(self) -> ClassModel:\n        \"\"\"Creates a ClassModel instance after building and setting the children models.\"\"\"\n        self.build_and_set_children()\n        return ClassModel(\n            **self._get_common_attributes(),\n            **self._get_class_specific_attributes(),\n        )\n\n\n\nSummary:\n\n        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder\n\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_parameters_list\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_decorators\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_docstring\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_return_annotation\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_method\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-set_is_async\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-_get_function_specific_attributes\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:function_model_builder.py__*__MODULE__*__CLASS-FunctionModelBuilder__*__FUNCTION-build\n\n        None, None, None\n        , \nCode block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:\nfrom __future__ import annotations\n\nfrom typing import TYPE_CHECKING, Any, Union\nfrom abc import ABC, abstractmethod\n\nfrom postcode.models.models import (\n    BaseCodeBlockModel,\n    CommentModel,\n    ImportModel,\n    DependencyModel,\n    BlockType,\n)\n\n\nif TYPE_CHECKING:\n    from postcode.python_parser.model_builders.class_model_builder import (\n        ClassModelBuilder,\n    )\n    from postcode.python_parser.model_builders.function_model_builder import (\n        FunctionModelBuilder,\n    )\n    from postcode.python_parser.model_builders.module_model_builder import (\n        ModuleModelBuilder,\n    )\n    from postcode.python_parser.model_builders.standalone_block_model_builder import (\n        StandaloneBlockModelBuilder,\n    )\n\n\nclass BaseModelBuilder(ABC):\n    \"\"\"\n    Abstract base class for building models of different code blocks.\n\n    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.\n\n    Attributes:\n        id (str): The unique identifier for the code block.\n        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):\n            A list of builders for the children code blocks.\n        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.\n\n    Example:\n        # This example demonstrates how a derived builder might be initialized and used.\n        >>> class SomeModelBuilder(BaseModelBuilder):\n                def build(self):\n                    # Building logic specific to 'SomeModelBuilder'\n                    pass\n        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')\n        >>> builder.set_start_line_num(1).set_end_line_num(10)\n        # Sets the start and end line numbers for the code block.\n    \"\"\"\n\n    def __init__(\n        self, *, id: str, block_type: BlockType, parent_id: str | None\n    ) -> None:\n        self.id: str = id\n        self.children_builders: list[\n            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder\n        ] = []\n\n        self.common_attributes = BaseCodeBlockModel(\n            id=id,\n            parent_id=parent_id,\n            block_type=block_type,\n            start_line_num=0,\n            end_line_num=0,\n            code_content=\"\",\n            important_comments=None,\n            children=None,\n            dependencies=None,\n            summary=None,\n        )\n\n    def set_start_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the start line number of the code block model instance.\"\"\"\n        self.common_attributes.start_line_num = line_num\n        return self\n\n    def set_end_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the end line number of the code block model instance.\"\"\"\n        self.common_attributes.end_line_num = line_num\n        return self\n\n    def set_code_content(\n        self, code_content: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds the string containing the content of the code block to the model instance.\"\"\"\n        self.common_attributes.code_content = code_content\n        return self\n\n    def add_important_comment(\n        self, comment: CommentModel\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds an important comment to the model instance.\"\"\"\n        if not self.common_attributes.important_comments:\n            self.common_attributes.important_comments = []\n        self.common_attributes.important_comments.append(comment)\n        return self\n\n    def add_summary(\n        self, summary: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a summary to the model instance.\"\"\"\n        self.common_attributes.summary = summary\n        # print(f\"Added summary to {self.common_attributes.id}\")\n        return self\n\n    def add_child(\n        self,\n        child: Union[\n            \"ClassModelBuilder\", \"FunctionModelBuilder\", StandaloneBlockModelBuilder\n        ],\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a child code block to the model instance.\"\"\"\n        self.children_builders.append(child)\n        return self\n\n    def set_dependencies(\n        self, dependencies: list[ImportModel | DependencyModel] | None\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the dependencies of the model instance.\"\"\"\n        self.common_attributes.dependencies = dependencies\n        return self\n\n    def update_import_dependency(\n        self,\n        new_import_model: ImportModel,\n        old_import_model: ImportModel,\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"\n        Updates an import in the model instance.\n\n        Args:\n            new_import_model (ImportModel): The updated import model.\n            old_import_model\n\n        Returns:\n            BaseModelBuilder: The base model builder instance.\n        \"\"\"\n\n        if self.common_attributes.dependencies:\n            import_model_to_remove: ImportModel | None = None\n            for existing_import_model in self.common_attributes.dependencies:\n                if isinstance(existing_import_model, DependencyModel):\n                    continue\n\n                if (\n                    existing_import_model.import_names == old_import_model.import_names\n                    and existing_import_model.imported_from\n                    == old_import_model.imported_from\n                    and existing_import_model.import_module_type\n                    == old_import_model.import_module_type\n                ):\n                    import_model_to_remove = existing_import_model\n                    break\n\n            if not import_model_to_remove:\n                raise Exception(f\"Could not find import to remove: {old_import_model}\")\n\n            self.common_attributes.dependencies.remove(import_model_to_remove)\n            self.common_attributes.dependencies.append(new_import_model)\n        else:\n            raise Exception(\n                f\"No imports in the builders imports list: {self.common_attributes.dependencies}\"\n            )\n        return self\n\n    def build_and_set_children(self) -> None:\n        if self.children_builders:\n            self.common_attributes.children = [\n                child.build() for child in self.children_builders\n            ]\n\n    def _get_common_attributes(self) -> dict[str, Any]:\n        \"\"\"\n        Returns a dictionary containing the attributes common to all code block models.\n        \"\"\"\n        return self.common_attributes.model_dump()\n\n    @abstractmethod\n    def build(\n        self,\n    ) -> None:\n        \"\"\"\n        Builds and returns the code block model instance.\n\n        Returns:\n            CodeBlockModel: The built code block model instance.\n        \"\"\"\n        ...\n\n\n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper\n\n        None, None, None\n        , None, None\n        , None, \nfrom functools import wraps\nimport inspect\nfrom inspect import FrameInfo\nimport logging\nfrom logging import LogRecord, Logger\nfrom typing import Callable\nimport libcst\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType\n\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__\n\n        None, None, None\n        , None, \nfrom enum import Enum\n        , \nfrom typing import Any\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder\n\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_docstring\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_header_content\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-set_footer_content\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-add_import\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-update_import\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-_get_module_specific_attributes\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:module_model_builder.py__*__MODULE__*__CLASS-ModuleModelBuilder__*__FUNCTION-build\n\n        None, None, None\n        , \nCode block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:\nfrom __future__ import annotations\n\nfrom typing import TYPE_CHECKING, Any, Union\nfrom abc import ABC, abstractmethod\n\nfrom postcode.models.models import (\n    BaseCodeBlockModel,\n    CommentModel,\n    ImportModel,\n    DependencyModel,\n    BlockType,\n)\n\n\nif TYPE_CHECKING:\n    from postcode.python_parser.model_builders.class_model_builder import (\n        ClassModelBuilder,\n    )\n    from postcode.python_parser.model_builders.function_model_builder import (\n        FunctionModelBuilder,\n    )\n    from postcode.python_parser.model_builders.module_model_builder import (\n        ModuleModelBuilder,\n    )\n    from postcode.python_parser.model_builders.standalone_block_model_builder import (\n        StandaloneBlockModelBuilder,\n    )\n\n\nclass BaseModelBuilder(ABC):\n    \"\"\"\n    Abstract base class for building models of different code blocks.\n\n    This class follows the builder pattern, providing a structured approach to constructing models for various types of code blocks (like modules, classes, functions). It defines common attributes and methods used across all specific model builders.\n\n    Attributes:\n        id (str): The unique identifier for the code block.\n        children_builders (list[Union[ClassModelBuilder, FunctionModelBuilder, StandaloneBlockModelBuilder]]):\n            A list of builders for the children code blocks.\n        common_attributes (BaseCodeBlockModel): An instance containing common attributes shared across different code block models.\n\n    Example:\n        # This example demonstrates how a derived builder might be initialized and used.\n        >>> class SomeModelBuilder(BaseModelBuilder):\n                def build(self):\n                    # Building logic specific to 'SomeModelBuilder'\n                    pass\n        >>> builder = SomeModelBuilder(id='123', block_type=BlockType.CLASS, parent_id='root')\n        >>> builder.set_start_line_num(1).set_end_line_num(10)\n        # Sets the start and end line numbers for the code block.\n    \"\"\"\n\n    def __init__(\n        self, *, id: str, block_type: BlockType, parent_id: str | None\n    ) -> None:\n        self.id: str = id\n        self.children_builders: list[\n            ClassModelBuilder | FunctionModelBuilder | StandaloneBlockModelBuilder\n        ] = []\n\n        self.common_attributes = BaseCodeBlockModel(\n            id=id,\n            parent_id=parent_id,\n            block_type=block_type,\n            start_line_num=0,\n            end_line_num=0,\n            code_content=\"\",\n            important_comments=None,\n            children=None,\n            dependencies=None,\n            summary=None,\n        )\n\n    def set_start_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the start line number of the code block model instance.\"\"\"\n        self.common_attributes.start_line_num = line_num\n        return self\n\n    def set_end_line_num(\n        self, line_num: int\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the end line number of the code block model instance.\"\"\"\n        self.common_attributes.end_line_num = line_num\n        return self\n\n    def set_code_content(\n        self, code_content: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds the string containing the content of the code block to the model instance.\"\"\"\n        self.common_attributes.code_content = code_content\n        return self\n\n    def add_important_comment(\n        self, comment: CommentModel\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds an important comment to the model instance.\"\"\"\n        if not self.common_attributes.important_comments:\n            self.common_attributes.important_comments = []\n        self.common_attributes.important_comments.append(comment)\n        return self\n\n    def add_summary(\n        self, summary: str\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a summary to the model instance.\"\"\"\n        self.common_attributes.summary = summary\n        # print(f\"Added summary to {self.common_attributes.id}\")\n        return self\n\n    def add_child(\n        self,\n        child: Union[\n            \"ClassModelBuilder\", \"FunctionModelBuilder\", StandaloneBlockModelBuilder\n        ],\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Adds a child code block to the model instance.\"\"\"\n        self.children_builders.append(child)\n        return self\n\n    def set_dependencies(\n        self, dependencies: list[ImportModel | DependencyModel] | None\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"Sets the dependencies of the model instance.\"\"\"\n        self.common_attributes.dependencies = dependencies\n        return self\n\n    def update_import_dependency(\n        self,\n        new_import_model: ImportModel,\n        old_import_model: ImportModel,\n    ) -> Union[\n        \"BaseModelBuilder\",\n        \"ModuleModelBuilder\",\n        \"ClassModelBuilder\",\n        \"FunctionModelBuilder\",\n    ]:\n        \"\"\"\n        Updates an import in the model instance.\n\n        Args:\n            new_import_model (ImportModel): The updated import model.\n            old_import_model\n\n        Returns:\n            BaseModelBuilder: The base model builder instance.\n        \"\"\"\n\n        if self.common_attributes.dependencies:\n            import_model_to_remove: ImportModel | None = None\n            for existing_import_model in self.common_attributes.dependencies:\n                if isinstance(existing_import_model, DependencyModel):\n                    continue\n\n                if (\n                    existing_import_model.import_names == old_import_model.import_names\n                    and existing_import_model.imported_from\n                    == old_import_model.imported_from\n                    and existing_import_model.import_module_type\n                    == old_import_model.import_module_type\n                ):\n                    import_model_to_remove = existing_import_model\n                    break\n\n            if not import_model_to_remove:\n                raise Exception(f\"Could not find import to remove: {old_import_model}\")\n\n            self.common_attributes.dependencies.remove(import_model_to_remove)\n            self.common_attributes.dependencies.append(new_import_model)\n        else:\n            raise Exception(\n                f\"No imports in the builders imports list: {self.common_attributes.dependencies}\"\n            )\n        return self\n\n    def build_and_set_children(self) -> None:\n        if self.children_builders:\n            self.common_attributes.children = [\n                child.build() for child in self.children_builders\n            ]\n\n    def _get_common_attributes(self) -> dict[str, Any]:\n        \"\"\"\n        Returns a dictionary containing the attributes common to all code block models.\n        \"\"\"\n        return self.common_attributes.model_dump()\n\n    @abstractmethod\n    def build(\n        self,\n    ) -> None:\n        \"\"\"\n        Builds and returns the code block model instance.\n\n        Returns:\n            CodeBlockModel: The built code block model instance.\n        \"\"\"\n        ...\n\n\n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper\n\n        None, None, None\n        , None, None\n        , None, \nfrom functools import wraps\nimport inspect\nfrom inspect import FrameInfo\nimport logging\nfrom logging import LogRecord, Logger\nfrom typing import Callable\nimport libcst\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType\n\n        \n\nSummary:\n\n        postcode:models:enums.py__*__MODULE__*__CLASS-BlockType__*__FUNCTION-__str__\n\n        None, None, None\n        , None, \nfrom enum import Enum\n        , \nfrom typing import Any\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder\n\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-__init__\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-set_variable_assignments\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-_get_standalone_block_specific_attributes\n\n        None, None, None\n        \n\nSummary:\n\n        postcode:python_parser:model_builders:standalone_block_model_builder.py__*__MODULE__*__CLASS-StandaloneBlockModelBuilder__*__FUNCTION-build\n\n        None, None, None\n        , \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator\n\n        \n\nSummary:\n\n        postcode:utilities:logger:decorators.py__*__MODULE__*__FUNCTION-logging_decorator__*__FUNCTION-decorator__*__FUNCTION-wrapper\n\n        None, None, None\n        , None, None\n        , None, \nfrom functools import wraps\nimport inspect\nfrom inspect import FrameInfo\nimport logging\nfrom logging import LogRecord, Logger\nfrom typing import Callable\nimport libcst\n        \nCode block import (postcode:python_parser:model_builders:base_model_builder.py__*__MODULE) code content:\nfrom __future__ import annotations\n\nfrom typing import TYPE_CHECKING, Any, Union\nfrom abc import ABC, abstractmethod\n\nfrom postcode.models.models import (\n    BaseCodeBlockModel,\n    CommentModel,\n    ImportModel,\n    DependencyModel,\n    BlockType,\n)\n\n\nif TYPE_CHECKING:\n    from postcode.python_parser.model_builders.class_model_builder import (\n        ClassModelBuilder,\n    )\n    from postcode.python_parser.model_builders.function_model_builder import (\n        FunctionModelBuilder,\n    )\n    from postcode.python_parser.model_builders.module_model_builder import (\n        ModuleModelBuilder,\n    )\n    from postcode.python_parser.model_builders.standalone_block_model_builder import (\n        StandaloneBlockModelBuilder,\n    )\n\n\nclass BaseModel