{
    "function_name": "_get_chroma_queries",
    "docstring": null,
    "decorators": null,
    "parameters": null,
    "returns": "list[str] | None",
    "is_method": true,
    "is_async": false,
    "id": "postcode:ai_services:librarians:chroma_librarians.py__*__MODULE__*__CLASS-ChromaLibrarian__*__FUNCTION-_get_chroma_queries",
    "file_path": "postcode/ai_services/librarians/chroma_librarians.py",
    "parent_id": "postcode:ai_services:librarians:chroma_librarians.py__*__MODULE__*__CLASS-ChromaLibrarian",
    "block_type": "FUNCTION",
    "start_line_num": 72,
    "end_line_num": 113,
    "code_content": "\ndef _get_chroma_queries(\n    self, user_question: str, queries_count: int = 5, retries: int = 3\n) -> list[str] | None:\n    while retries > 0:\n        retries -= 1\n\n        prompt: str = ChromaLibrarianPromptCreator.create_prompt(\n            user_question,\n            prompt_template=DEFAULT_CHROMA_LIBRARIAN_PROMPT,\n            queries_count=queries_count,\n        )\n\n        try:\n            completion: openai_types.ChatCompletion = (\n                self.client.chat.completions.create(\n                    model=self.model,\n                    messages=[\n                        {\n                            \"role\": \"system\",\n                            \"content\": DEFAULT_CHROMA_LIBRARIAN_SYSTEM_PROMPT,\n                        },\n                        {\"role\": \"user\", \"content\": prompt},\n                    ],\n                )\n            )\n            content: str | None = completion.choices[0].message.content\n\n            if content:\n                queries_str: str = content.split(\"QUERIES_LIST:\")[-1]\n                queries_list: list[str] = queries_str.split(\"\\n\")\n                queries: list[str] = [\n                    query.strip(\"- \") for query in queries_list if len(query) > 0\n                ]\n                if len(queries) >= 1:\n                    return queries\n\n        except Exception as e:\n            logging.error(f\"An error occurred: {e}\")\n\n    return None\n",
    "important_comments": null,
    "dependencies": null,
    "summary": "\nSummary:\n\n        postcode:ai_services:librarians:chroma_librarians.py__*__MODULE__*__CLASS-ChromaLibrarian__*__FUNCTION-_get_chroma_queries\n\n        None, None, None\n        ",
    "children_ids": []
}