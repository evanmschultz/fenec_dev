{
    "docstring": null,
    "header": [],
    "footer": [],
    "imports": [
        {
            "import_names": [
                {
                    "name": "subprocess",
                    "as_name": null,
                    "local_block_id": null
                }
            ],
            "imported_from": null,
            "import_module_type": "STANDARD_LIBRARY",
            "local_module_id": null
        }
    ],
    "id": "postcode:updaters:git_updater.py__*__MODULE",
    "file_path": "postcode/updaters/git_updater.py",
    "parent_id": "postcode:updaters__*__DIRECTORY",
    "block_type": "MODULE",
    "start_line_num": 1,
    "end_line_num": 114,
    "code_content": "import subprocess\n\n\nclass UpdateUsingGit:\n    \"\"\"\n    DO NOT USE: The necessary functionality for this class is not yet implemented.\n\n    A class that provides methods to get the names of the Python modules that have been changed using on version control.\n\n    Use this class to get all the file names for the Python modules that have been changes since the last commit or since\n    a specific commit. You can get the `commit_hash` for a specific commit by going to the commit on GitHub and copying\n    the hash from the URL. For example, the commit hash for the following commit is `e8856d2`, or you can use the terminal, for\n    instance: `git log --author=\"username\" --grep=\"commit message\" --format=\"%H\"` if you know all the details of the commit.\n\n    Methods:\n        - `get_module_names_updated_since_last_commit()`: Returns a list of the modules that have been changed since the last commit.\n        - `get_module_names_updated_since_commit(commit_hash: str)`: Returns a list of the modules that have been changed since the specified commit.\n\n    Examples:\n        ```Python\n        from postcode.updaters.git_updater import UpdateUsingGit\n\n        # Get the names of the modules that have been changed since the last commit\n        changed_modules_name_list = UpdateUsingGit.get_module_names_updated_since_last_commit()\n        ```\n    \"\"\"\n\n    @staticmethod\n    def get_module_names_updated_since_last_commit() -> list[str]:\n        \"\"\"\n        Returns a list of the modules that have been changed since the last commit.\n\n        Runs the following command using subprocess:\n            (git ls-files --others --exclude-standard; git diff --name-only HEAD) | sort | uniq\n\n        Returns:\n            - list[str]: A list of the modules that have been changed since the last commit.\n\n        Raises:\n            - Exception: If the git command fails.\n        \"\"\"\n\n        git_command = \"(git ls-files --others --exclude-standard; git diff --name-only HEAD) | sort | uniq\"\n\n        result: subprocess.CompletedProcess[str] = subprocess.run(\n            git_command, shell=True, capture_output=True, text=True\n        )\n        if result.returncode != 0:\n            raise Exception(\"Git command failed: \" + result.stderr)\n\n        changed_files: list[str] = result.stdout.strip().split(\"\\n\")\n\n        return [file for file in changed_files if file.endswith(\".py\")]\n\n    @staticmethod\n    def get_module_names_updated_since_commit(commit_hash: str) -> list[str]:\n        \"\"\"\n        Returns a list of the Python modules that have been changed since the specified commit.\n\n        Args:\n            - commit (str): The commit hash or reference to compare the current state against.\n\n        Runs the following command using subprocess:\n            (git ls-files --others --exclude-standard; git diff --name-only COMMIT) | sort | uniq\n\n        Returns:\n            - list[str]: A list of the modules that have been changed since the specified commit.\n\n        Raises:\n            - Exception: If the git command fails.\n        \"\"\"\n\n        git_command = f\"(git ls-files --others --exclude-standard; git diff --name-only {commit_hash}) | sort | uniq\"\n\n        result: subprocess.CompletedProcess[str] = subprocess.run(\n            git_command, shell=True, capture_output=True, text=True\n        )\n        if result.returncode != 0:\n            raise Exception(\"Git command failed: \" + result.stderr)\n\n        changed_files: list[str] = result.stdout.strip().split(\"\\n\")\n\n        return [file for file in changed_files if file.endswith(\".py\")]\n\n    @staticmethod\n    def __get_updated_modules(directory: str | None = None) -> list[str]:\n        \"\"\"\n        DO NOT USE: The necessary functionality for this method is not yet implemented.\n\n        Returns a list of the modules that have been changed since the last commit based on a directory path.\n        \"\"\"\n        git_ls_files_cmd = \"git ls-files --others --exclude-standard\"\n        git_diff_cmd = \"git diff --name-only HEAD\"\n\n        if directory:\n            git_ls_files_cmd += f\" '{directory}'\"\n            git_diff_cmd += f\" '{directory}'\"\n\n        git_command: str = f\"({git_ls_files_cmd}; {git_diff_cmd}) | sort | uniq\"\n\n        result: subprocess.CompletedProcess[str] = subprocess.run(\n            git_command, shell=True, capture_output=True, text=True\n        )\n        if result.returncode != 0:\n            raise Exception(\"Git command failed: \" + result.stderr)\n\n        changed_files: list[str] = result.stdout.strip().split(\"\\n\")\n\n        return [file for file in changed_files if file.endswith(\".py\")]\n\n\nif __name__ == \"__main__\":\n    print(UpdateUsingGit.get_module_names_updated_since_commit(\"e8856d2\"))\n",
    "important_comments": null,
    "dependencies": null,
    "summary": "\n\nThe provided Python code defines a class `UpdateUsingGit` that offers static methods to identify Python modules that have been modified in a Git repository. The class includes two main methods: `get_module_names_updated_since_last_commit()` and `get_module_names_updated_since_commit(commit_hash: str)`, both of which return a list of Python files that have changed since the last commit or since a specified commit, respectively. These methods execute shell commands using the `subprocess` module to interact with Git, sorting and deduplicating the output to provide the list of changed files. Additionally, there is an unused private method `__get_updated_modules(directory: str | None = None)` intended to filter changes by directory, but it is not implemented. The code also contains a conditional block that, when run as a standalone script, prints the changed module names since a given commit hash. The class is marked with a warning not to be used as the necessary functionality is not yet implemented, indicating it is a work in progress.",
    "children_ids": [
        "postcode:updaters:git_updater.py__*__MODULE__*__STANDALONE_BLOCK-1",
        "postcode:updaters:git_updater.py__*__MODULE__*__CLASS-UpdateUsingGit"
    ]
}